<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>NexaRide — NCC e trasferimenti privati 24/7</title>
  <meta name="description" content="NCC e trasferimenti privati a Milano e Lombardia. Aeroporti, città, lunghi viaggi, gruppi. Risposta immediata su WhatsApp." />

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root { color-scheme: dark; }
    html { scroll-behavior: smooth; }
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    section[id] { scroll-margin-top: 90px; }

    .hero-overlay { pointer-events: none; }

    .fleet-card { position: relative; cursor: pointer; }
    .fleet-badge {
      position: absolute; top: 14px; right: 14px;
      display: none; align-items: center; gap: 8px;
      padding: 8px 10px; border-radius: 999px;
      background: rgba(0,0,0,0.55);
      border: 1px solid rgba(255,255,255,0.16);
      backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
      font-size: 12px; color: #fff; user-select: none; z-index: 5;
    }
    .fleet-badge .dot {
      width: 18px; height: 18px; border-radius: 999px;
      background: #25D366; display: grid; place-items: center;
      color: #0b1a10; font-weight: 800; line-height: 1;
    }
    .fleet-card.is-selected { outline: 2px solid rgba(255,255,255,0.9); outline-offset: 0px; }
    .fleet-card.is-selected .fleet-badge { display: inline-flex; }

    .seg-wrap { display: flex; gap: 8px; flex-wrap: wrap; }
    .seg {
      cursor: pointer;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04);
      padding: 10px 12px;
      border-radius: 16px;
      font-weight: 600;
      font-size: 14px;
      color: rgba(255,255,255,0.9);
      user-select: none;
      transition: background .15s ease, border-color .15s ease, transform .05s ease;
    }
    .seg:hover { background: rgba(255,255,255,0.07); border-color: rgba(255,255,255,0.18); }
    .seg:active { transform: translateY(1px); }
    .seg[aria-pressed="true"] { background: rgba(37,211,102,0.14); border-color: rgba(37,211,102,0.55); }

    .stickybar {
      position: fixed; left: 0; right: 0; bottom: 0; z-index: 60;
      padding: 10px 12px;
      background: rgba(10,10,10,0.72);
      border-top: 1px solid rgba(255,255,255,0.10);
      backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    }

    .lang-btn {
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04);
      padding: 8px 10px;
      border-radius: 14px;
      font-weight: 700;
      font-size: 12px;
      color: rgba(255,255,255,0.9);
    }
    .lang-btn.is-active {
      background: rgba(37,211,102,0.14);
      border-color: rgba(37,211,102,0.55);
    }

    .top-urgent {
      position: sticky; top: 56px; z-index: 45;
      background: rgba(245, 79, 79, 0.10);
      border-bottom: 1px solid rgba(245,79,79,0.25);
      backdrop-filter: blur(10px);
    }
  </style>
</head>

<body class="bg-neutral-950 text-neutral-100 pb-24 md:pb-0">
  <!-- HEADER -->
  <header class="sticky top-0 z-50 border-b border-white/10 bg-neutral-950/70 backdrop-blur">
    <div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-3">
      <a href="#top" class="flex items-center gap-3">
        <div class="h-9 w-9 rounded-xl bg-white/10 ring-1 ring-white/10 grid place-items-center font-bold">NR</div>
        <div class="leading-tight">
          <div class="font-semibold">NexaRide</div>
          <div id="t_header_sub" class="text-xs text-neutral-400">NCC • Milano • Transfer</div>
        </div>
      </a>

      <nav class="hidden items-center gap-6 text-sm text-neutral-300 md:flex">
        <a href="#milan" class="hover:text-white" id="t_nav_milan">Milano</a>
        <a href="#airports" class="hover:text-white" id="t_nav_airports">Aeroporti</a>
        <a href="#lakecomo" class="hover:text-white" id="t_nav_lakecomo">Lago di Como</a>
        <a href="#fleet" class="hover:text-white" id="t_nav_fleet">Flotta</a>
        <a href="#quote" class="hover:text-white" id="t_nav_quote">Preventivo</a>
        <a href="#faq" class="hover:text-white" id="t_nav_faq">FAQ</a>
      </nav>

      <div class="flex items-center gap-2">
        <div class="flex items-center gap-2">
          <button id="langIT" type="button" class="lang-btn is-active">IT</button>
          <button id="langEN" type="button" class="lang-btn">EN</button>
        </div>

        <button id="ctaWATop" type="button"
          class="inline-flex items-center gap-2 rounded-2xl bg-[#25D366] px-4 py-2 text-sm font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
          <span id="t_btn_whatsapp_top">WhatsApp</span>
        </button>
      </div>
    </div>
  </header>

  <!-- URGENT STICKY (appears only if within 2h) -->
  <div id="urgentTopBar" class="top-urgent hidden">
    <div class="mx-auto max-w-6xl px-4 py-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2">
      <div class="text-sm text-rose-100">
        <span class="font-semibold" id="t_urgent_top_title">Entro 2 ore?</span>
        <span class="text-rose-100/90" id="t_urgent_top_desc">Scrivici “URGENTE” su WhatsApp per risposta immediata.</span>
      </div>
      <div class="flex gap-2">
        <button id="urgentTopWA" type="button"
          class="inline-flex items-center justify-center rounded-2xl bg-[#25D366] px-4 py-2 font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
          <span id="t_urgent_top_btn">WhatsApp urgente</span>
        </button>
        <a href="tel:+393208784091"
          class="inline-flex items-center justify-center rounded-2xl border border-white/10 bg-white/5 px-4 py-2 font-semibold hover:bg-white/10">
          <span id="t_urgent_top_call">Chiama</span>
        </a>
      </div>
    </div>
  </div>

  <main id="top">
    <!-- HERO -->
    <section class="relative overflow-hidden">
      <div class="hero-overlay absolute inset-0 z-0 bg-[radial-gradient(ellipse_at_top,rgba(255,255,255,0.10),transparent_55%)]"></div>

      <div class="relative z-10 mx-auto grid max-w-6xl grid-cols-1 gap-10 px-4 py-14 md:grid-cols-2 md:py-18">
        <div>
          <div class="flex flex-wrap items-center gap-2">
            <div class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2 text-sm text-neutral-200">
              <span class="h-2 w-2 rounded-full bg-emerald-400"></span>
              <span id="t_badge_1">Disponibili 24/7</span>
            </div>
            <div class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2 text-sm text-neutral-200">
              <span class="h-2 w-2 rounded-full bg-sky-400"></span>
              <span id="t_badge_2">Risposta rapida</span>
            </div>
          </div>

          <h1 id="t_h1" class="mt-5 text-4xl font-semibold leading-tight tracking-tight md:text-5xl">
            NCC e trasferimenti privati – disponibili 24/7
          </h1>

          <p id="t_sub" class="mt-5 text-lg text-neutral-300">
            Aeroporti · città · lunghi viaggi · gruppi<br />
            Rispondiamo subito su WhatsApp
          </p>

          <!-- seasonal callout -->
          <div class="mt-5 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-neutral-200">
            <span class="font-semibold" id="t_season_title">Speciale eventi:</span>
            <span class="text-neutral-200/90" id="t_season_desc">Fashion Week · Salone del Mobile · Stagione Lago di Como</span>
          </div>

          <div class="mt-6 flex flex-wrap gap-3">
            <button id="ctaWAHero" type="button"
              class="inline-flex items-center justify-center rounded-2xl bg-[#25D366] px-6 py-3 font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
              <span id="t_btn_wa_hero">Scrivici ora su WhatsApp</span>
            </button>

            <button id="ctaScrollToForm" type="button"
              class="inline-flex items-center justify-center rounded-2xl border border-white/10 bg-white/5 px-6 py-3 font-semibold hover:bg-white/10 active:bg-white/15">
              <span id="t_btn_fill_details">Compila i dettagli</span>
            </button>
          </div>

          <div id="t_microtrust" class="mt-3 text-xs text-neutral-400">
            Preventivo immediato · Senza app · Persona reale
          </div>

          <!-- trust badge -->
          <div class="mt-4 text-xs text-neutral-400" id="t_trustline">
            Servizio NCC autorizzato · Fattura su richiesta · Pagamenti: carta/contanti/bonifico
          </div>

          <div class="mt-5 text-sm text-neutral-400">
            WhatsApp: <span class="text-white font-semibold">+39 320 878 4091</span> •
            <span id="t_email_label">Email</span>:
            <a class="underline hover:text-white" href="mailto:info@nexaride.it">info@nexaride.it</a>
          </div>
        </div>

        <div class="relative">
          <div class="rounded-[2rem] border border-white/10 bg-white/5 p-7 shadow-2xl shadow-black/50">
            <div class="flex items-start justify-between gap-4">
              <div>
                <div id="t_card_small" class="text-sm text-neutral-300">Come funziona</div>
                <div id="t_card_title" class="mt-1 text-xl font-semibold">Aeroporti • Lavoro • Eventi</div>
              </div>
              <div class="rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-neutral-200">
                <span id="t_card_area">Milano & Lombardia</span>
              </div>
            </div>

            <div class="mt-6 grid gap-4">
              <div class="rounded-3xl border border-white/10 bg-neutral-950/40 p-5">
                <div id="t_card_1_t" class="text-white font-semibold">1) Scrivi su WhatsApp</div>
                <div id="t_card_1_d" class="mt-1 text-neutral-300">Partenza, destinazione, data/ora, passeggeri</div>
              </div>
              <div class="rounded-3xl border border-white/10 bg-neutral-950/40 p-5">
                <div id="t_card_2_t" class="text-white font-semibold">2) Ricevi il preventivo</div>
                <div id="t_card_2_d" class="mt-1 text-neutral-300">Risposta rapida, persona reale</div>
              </div>
              <div class="rounded-3xl border border-white/10 bg-neutral-950/40 p-5">
                <div id="t_card_3_t" class="text-white font-semibold">3) Conferma e viaggio</div>
                <div id="t_card_3_d" class="mt-1 text-neutral-300">Puntualità, comfort, discrezione</div>
              </div>
            </div>

            <div class="mt-6">
              <button id="ctaWACard" type="button"
                class="w-full inline-flex items-center justify-center rounded-2xl bg-[#25D366] text-neutral-950 px-5 py-3 font-semibold hover:opacity-90 active:opacity-80">
                <span id="t_btn_check_wa">Scrivici su WhatsApp</span>
              </button>
              <p id="t_card_note" class="mt-3 text-xs text-neutral-400">
                Preventivo gratuito, nessun impegno.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- INTENT ANCHORS -->
    <section id="milan" class="border-t border-white/10 bg-white/5">
      <div class="mx-auto max-w-6xl px-4 py-12">
        <h2 class="text-3xl font-semibold" id="t_intent_milan_title">Milano</h2>
        <p class="mt-3 text-neutral-300 max-w-3xl" id="t_intent_milan_desc">
          City transfer, business, eventi, hotel. Prenotazione rapida su WhatsApp.
        </p>
        <div class="mt-6 flex gap-3 flex-wrap">
          <button type="button" class="seg" id="intentMilanWA" aria-pressed="false">WhatsApp</button>
          <button type="button" class="seg" id="intentMilanQuote" aria-pressed="false">Preventivo</button>
        </div>
      </div>
    </section>

    <section id="airports" class="border-t border-white/10">
      <div class="mx-auto max-w-6xl px-4 py-12">
        <h2 class="text-3xl font-semibold" id="t_intent_air_title">Aeroporti</h2>
        <p class="mt-3 text-neutral-300 max-w-3xl" id="t_intent_air_desc">
          MXP Malpensa · LIN Linate · BGY Orio. Meet & Greet su richiesta.
        </p>
        <div class="mt-6 flex gap-3 flex-wrap">
          <button type="button" class="seg" id="intentAirWA" aria-pressed="false">WhatsApp</button>
          <button type="button" class="seg" id="intentAirQuote" aria-pressed="false">Preventivo</button>
        </div>
      </div>
    </section>

    <section id="lakecomo" class="border-t border-white/10 bg-white/5">
      <div class="mx-auto max-w-6xl px-4 py-12">
        <h2 class="text-3xl font-semibold" id="t_intent_lake_title">Lago di Como</h2>
        <p class="mt-3 text-neutral-300 max-w-3xl" id="t_intent_lake_desc">
          Como · Bellagio · Varenna · Menaggio. Ideale per giornata intera o A/R.
        </p>
        <div class="mt-6 flex gap-3 flex-wrap">
          <button type="button" class="seg" id="intentLakeWA" aria-pressed="false">WhatsApp</button>
          <button type="button" class="seg" id="intentLakeQuote" aria-pressed="false">Preventivo</button>
        </div>
      </div>
    </section>

    <!-- FLEET -->
    <section id="fleet" class="mx-auto max-w-6xl px-4 py-16">
      <h2 id="t_fleet_title" class="text-3xl font-semibold">Categorie veicoli</h2>
      <p id="t_fleet_sub" class="mt-3 text-neutral-300 max-w-2xl">
        Seleziona una categoria: precompiliamo il form. Se vuoi un VAN anche in 1–2 passeggeri, puoi sceglierlo.
      </p>

      <div class="mt-10 grid gap-6 md:grid-cols-3">
        <div data-vehicle-label="Comfort / SUV (Toyota RAV4)"
          class="fleet-card rounded-3xl border border-white/10 bg-white/5 overflow-hidden transition hover:scale-[1.01] hover:border-white/20">
          <div class="fleet-badge"><span class="dot">✓</span> <span id="t_selected_badge">Selezionato</span></div>
          <img src="/rav4_industriale.png" alt="Toyota RAV4" class="w-full h-48 object-cover">
          <div class="p-6">
            <h3 id="t_fleet_c1_t" class="text-xl font-semibold">Comfort / SUV</h3>
            <p id="t_fleet_c1_d" class="mt-2 text-neutral-300">Toyota RAV4 · ideale fino a 4 passeggeri.</p>
          </div>
        </div>

        <div data-vehicle-label="Executive (Mercedes Classe E)"
          class="fleet-card rounded-3xl border border-white/10 bg-white/5 overflow-hidden transition hover:scale-[1.01] hover:border-white/20">
          <div class="fleet-badge"><span class="dot">✓</span> <span id="t_selected_badge2">Selezionato</span></div>
          <img src="/classeE_industriale.png" alt="Mercedes Classe E" class="w-full h-48 object-cover">
          <div class="p-6">
            <h3 id="t_fleet_c2_t" class="text-xl font-semibold">Executive</h3>
            <p id="t_fleet_c2_d" class="mt-2 text-neutral-300">Mercedes Classe E · business e VIP.</p>
          </div>
        </div>

        <div data-vehicle-label="Van / Gruppi (Mercedes Classe V / Vito)"
          class="fleet-card rounded-3xl border border-white/10 bg-white/5 overflow-hidden transition hover:scale-[1.01] hover:border-white/20">
          <div class="fleet-badge"><span class="dot">✓</span> <span id="t_selected_badge3">Selezionato</span></div>
          <img src="/classeV_industriale.png" alt="Mercedes Classe V / Vito" class="w-full h-48 object-cover">
          <div class="p-6">
            <h3 id="t_fleet_c3_t" class="text-xl font-semibold">Van / Gruppi</h3>
            <p id="t_fleet_c3_d" class="mt-2 text-neutral-300">Classe V / Vito · fino a 7 passeggeri + bagagli.</p>
          </div>
        </div>
      </div>

      <div class="mt-10 flex justify-center">
        <button id="ctaFleetToForm" type="button"
          class="inline-flex items-center justify-center rounded-2xl bg-white px-8 py-4 text-lg font-semibold text-neutral-950 hover:bg-neutral-200 active:bg-neutral-300">
          <span id="t_btn_fleet_quote">Richiedi preventivo</span>
        </button>
      </div>

      <p id="t_fleet_hint" class="mt-3 text-center text-xs text-neutral-400">
        Seleziona un veicolo per precompilare il form.
      </p>
    </section>

    <!-- REVIEWS (simple cards) -->
    <section class="border-t border-white/10 bg-white/5">
      <div class="mx-auto max-w-6xl px-4 py-12">
        <h2 class="text-3xl font-semibold" id="t_reviews_title">Recensioni</h2>
        <p class="mt-3 text-neutral-300" id="t_reviews_desc">Esempi di feedback (da Google).</p>

        <div class="mt-8 grid gap-4 md:grid-cols-3">
          <div class="rounded-3xl border border-white/10 bg-neutral-950/40 p-6">
            <div class="flex items-center justify-between">
              <div class="font-semibold">Marco</div>
              <div class="text-amber-300">★★★★★</div>
            </div>
            <p class="mt-3 text-neutral-200" id="t_rev_1">Puntuali e professionali. Preventivo rapido su WhatsApp, servizio impeccabile.</p>
            <div class="mt-3 text-xs text-neutral-500">Google</div>
          </div>

          <div class="rounded-3xl border border-white/10 bg-neutral-950/40 p-6">
            <div class="flex items-center justify-between">
              <div class="font-semibold">Sarah</div>
              <div class="text-amber-300">★★★★★</div>
            </div>
            <p class="mt-3 text-neutral-200" id="t_rev_2">Great driver, clean car, smooth airport transfer. Fast communication.</p>
            <div class="mt-3 text-xs text-neutral-500">Google</div>
          </div>

          <div class="rounded-3xl border border-white/10 bg-neutral-950/40 p-6">
            <div class="flex items-center justify-between">
              <div class="font-semibold">Luca</div>
              <div class="text-amber-300">★★★★★</div>
            </div>
            <p class="mt-3 text-neutral-200" id="t_rev_3">Per eventi e viaggi lunghi: seri, discreti e affidabili. Consigliatissimi.</p>
            <div class="mt-3 text-xs text-neutral-500">Google</div>
          </div>
        </div>
      </div>
    </section>

    <!-- QUOTE -->
    <section id="quote" class="mx-auto max-w-6xl px-4 py-12">
      <div class="rounded-[2rem] border border-white/10 bg-white/5 p-8">
        <div class="flex flex-col gap-6 md:flex-row md:items-end md:justify-between">
          <div>
            <h2 id="t_quote_title" class="text-3xl font-semibold">Richiedi preventivo</h2>
            <p id="t_quote_sub" class="mt-2 text-neutral-300">Compila i dettagli e invia su WhatsApp in 1 click.</p>

            <div id="selectedVehicleWrap" class="mt-3 hidden">
              <span class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2 text-sm text-neutral-200">
                <span class="h-2 w-2 rounded-full bg-[#25D366]"></span>
                <span id="t_selected_label">Veicolo selezionato</span>:
                <span id="selectedVehicleLabel" class="font-semibold text-white"></span>
              </span>
            </div>

            <div class="mt-4 text-sm text-neutral-300">
              WhatsApp: <span class="text-white font-semibold">+39 320 878 4091</span> •
              <span id="t_email_label2">Email</span>:
              <a class="underline hover:text-white" href="mailto:info@nexaride.it">info@nexaride.it</a>
            </div>

            <div id="t_quote_micro" class="mt-2 text-xs text-neutral-400">
              Preventivo gratuito · Risposta tipica: <span class="text-neutral-200 font-semibold">2–5 min</span>
            </div>
          </div>

          <div class="flex flex-wrap gap-3">
            <a href="tel:+393208784091"
              class="inline-flex items-center justify-center rounded-2xl border border-white/10 bg-white/5 px-5 py-3 font-semibold hover:bg-white/10">
              <span id="t_btn_call">Chiama</span>
            </a>

            <button id="ctaWAOpenGeneric" type="button"
              class="inline-flex items-center justify-center rounded-2xl bg-[#25D366] px-5 py-3 font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
              <span id="t_btn_open_wa">Apri WhatsApp</span>
            </button>
          </div>
        </div>

        <div id="formAlert" class="mt-6 hidden rounded-2xl border border-red-500/30 bg-red-500/10 px-5 py-4 text-sm text-red-100">
          <div class="font-semibold" id="t_form_alert_title">Compila i campi obbligatori</div>
          <div id="formAlertText" class="mt-1 text-red-100/90"></div>
        </div>

        <form id="quoteForm" class="mt-8 grid grid-cols-1 gap-4 md:grid-cols-4">
          <!-- contact preference -->
          <div class="md:col-span-4">
            <label class="text-sm text-neutral-300" id="t_contact_pref">Preferenza contatto</label>
            <div class="mt-2 seg-wrap">
              <button type="button" class="seg" id="prefWA" aria-pressed="true">WhatsApp</button>
              <button type="button" class="seg" id="prefCall" aria-pressed="false">Chiamata</button>
            </div>
            <p class="mt-2 text-xs text-neutral-400" id="t_contact_pref_hint">
              Se scegli “Chiamata”, ti richiamiamo appena possibile.
            </p>
          </div>

          <!-- vehicle -->
          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_vehicle_label">Categoria veicolo *</label>
            <select id="vehicle" required
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100">
              <option value="" disabled selected id="t_vehicle_placeholder">Seleziona categoria veicolo</option>
              <option value="Comfort / SUV (Toyota RAV4)">Comfort / SUV (Toyota RAV4)</option>
              <option value="Executive (Mercedes Classe E)">Executive (Mercedes Classe E)</option>
              <option value="Van / Gruppi (Mercedes Classe V / Vito)">Van / Gruppi (Mercedes Classe V / Vito)</option>
            </select>
            <p class="mt-2 text-xs text-neutral-400" id="t_vehicle_hint">
              Puoi scegliere il Van anche per 1–2 passeggeri se lo preferisci.
            </p>
          </div>

          <!-- service type -->
          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_service_label">Tipo servizio</label>
            <select id="serviceType"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100">
              <option value="Solo andata" selected id="t_service_1">Solo andata</option>
              <option value="A disposizione (ore)" id="t_service_2">A disposizione (ore)</option>
              <option value="Andata/Ritorno" id="t_service_3">Andata/Ritorno</option>
              <option value="Intera giornata" id="t_service_4">Intera giornata</option>
            </select>

            <div id="arHint" class="mt-2 hidden rounded-2xl border border-sky-500/25 bg-sky-500/10 px-4 py-3 text-xs text-sky-100">
              <span id="t_ar_hint">Se l’orario di ritorno è incerto, scrivi “da definire” nelle Note.</span>
            </div>
          </div>

          <!-- conditional: return datetime (shown for round trip) -->
          <div id="returnWrap" class="md:col-span-2 hidden">
            <label class="text-sm text-neutral-300" id="t_return_label">Data / Ora ritorno</label>
            <input id="returnWhen" type="datetime-local"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100" />
            <div class="mt-2 rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3">
              <label class="flex items-center gap-3 text-sm text-neutral-200 cursor-pointer select-none">
                <input id="returnTbd" type="checkbox" class="h-5 w-5 accent-[#25D366]" />
                <span id="t_return_tbd">Ritorno da definire</span>
              </label>
              <p class="mt-2 text-xs text-neutral-400" id="t_return_tbd_hint">Se selezionato, non è necessario inserire l’orario di ritorno.</p>
            </div>
          </div>

          <!-- conditional: hourly -->
          <div id="hoursWrap" class="md:col-span-2 hidden">
            <label class="text-sm text-neutral-300" id="t_hours_label">Ore a disposizione *</label>
            <select id="hours" class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100">
              <option value="" disabled selected id="t_hours_placeholder">Seleziona</option>
              <option value="2">2</option><option value="3">3</option><option value="4">4</option>
              <option value="5">5</option><option value="6">6</option><option value="7">7</option>
              <option value="8">8</option><option value="9">9</option><option value="10">10</option>
              <option value="11">11</option><option value="12">12</option>
            </select>
            <p class="mt-2 text-xs text-neutral-400" id="t_hours_hint">Se scegli “A disposizione”, indica quante ore.</p>
          </div>

          <!-- from/to -->
          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_from_label">Partenza *</label>
            <input id="from" required autocomplete="off"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100 placeholder:text-neutral-500"
              placeholder="Es. Milano centro" />
          </div>

          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_to_label">Destinazione *</label>
            <input id="to" required autocomplete="off"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100 placeholder:text-neutral-500"
              placeholder="Es. MXP Malpensa" />
          </div>

          <div id="travelHint" class="md:col-span-4 hidden rounded-2xl border border-emerald-500/25 bg-emerald-500/10 px-4 py-3 text-xs text-emerald-100">
            <span id="t_travel_hint">
              Se è aeroporto/stazione, inserisci numero volo/treno nelle Note (se disponibile) per velocizzare la conferma.
            </span>
          </div>

          <!-- conditional: flight/train number -->
          <div id="flightWrap" class="md:col-span-2 hidden">
            <label class="text-sm text-neutral-300" id="t_flight_label">Numero volo / treno (facoltativo)</label>
            <input id="flightNumber" autocomplete="off"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100 placeholder:text-neutral-500"
              placeholder="Es. FR1234 / AZ203 / IC 605" />
          </div>

          <!-- conditional: meet & greet -->
          <div id="meetWrap" class="md:col-span-2 hidden">
            <label class="text-sm text-neutral-300" id="t_meet_label">Meet & Greet (arrivi)</label>
            <div class="mt-2 seg-wrap">
              <button type="button" class="seg" id="meetNo" aria-pressed="true"><span id="t_meet_no">No</span></button>
              <button type="button" class="seg" id="meetYes" aria-pressed="false"><span id="t_meet_yes">Sì</span></button>
            </div>
            <p class="mt-2 text-xs text-neutral-400" id="t_meet_hint">Opzione consigliata per aeroporti (cartello in arrivi).</p>
          </div>

          <!-- stops -->
          <div class="md:col-span-4">
            <label class="text-sm text-neutral-300" id="t_stops_label">Fermate (opzionale)</label>
            <input id="stops" autocomplete="off"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100 placeholder:text-neutral-500"
              placeholder="Es. Stazione → Hotel → Ufficio" />
            <p class="mt-2 text-xs text-neutral-400" id="t_stops_hint">Scrivi le fermate in ordine.</p>
          </div>

          <!-- when & pax -->
          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_when_label">Data / Ora *</label>
            <input id="when" required type="datetime-local"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100" />

            <div id="urgentHint" class="mt-2 hidden rounded-2xl border border-rose-500/25 bg-rose-500/10 px-4 py-3 text-xs text-rose-100">
              <div id="t_urgent_hint">Se è entro 2 ore, scrivici direttamente su WhatsApp.</div>
              <div class="mt-2">
                <button type="button" id="urgentWA"
                  class="inline-flex items-center justify-center rounded-2xl bg-[#25D366] px-4 py-2 font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
                  <span id="t_urgent_btn">WhatsApp urgente</span>
                </button>
              </div>
            </div>
          </div>

          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_pax_label">Passeggeri *</label>
            <select id="pax" required
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100">
              <option value="" disabled selected id="t_pax_placeholder">Seleziona</option>
              <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
              <option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option>
            </select>

            <div id="capacityNotice" class="mt-2 hidden rounded-2xl border border-amber-500/30 bg-amber-500/10 px-4 py-3 text-xs text-amber-100">
              <span id="t_capacity_notice">Per 5+ passeggeri selezioniamo automaticamente Van / Gruppi.</span>
            </div>
          </div>

          <!-- luggage qualitative -->
          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_luggage_label">Bagagli (consigliato)</label>
            <div class="mt-2 seg-wrap">
              <button type="button" class="seg" id="lugNone" aria-pressed="true"><span id="t_lug_none">Nessuno</span></button>
              <button type="button" class="seg" id="lugSome" aria-pressed="false"><span id="t_lug_some">1–2 valigie</span></button>
              <button type="button" class="seg" id="lugMany" aria-pressed="false"><span id="t_lug_many">Molti bagagli</span></button>
            </div>

            <div id="luggageVanHint" class="mt-2 hidden rounded-2xl border border-amber-500/25 bg-amber-500/10 px-4 py-3 text-xs text-amber-100">
              <span id="t_luggage_van_hint">Con 4 passeggeri e molti bagagli, spesso è meglio un Van (più spazio).</span>
            </div>
          </div>

          <!-- luggage counts -->
          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_luggage_counts_label">Dettaglio bagagli</label>
            <div class="mt-1 grid grid-cols-2 gap-3">
              <div>
                <label class="text-xs text-neutral-400" id="t_big_suitcases">Valigie grandi</label>
                <select id="bigSuitcases" class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100">
                  <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option>
                  <option value="4">4</option><option value="5">5</option><option value="6">6</option>
                </select>
              </div>
              <div>
                <label class="text-xs text-neutral-400" id="t_carry_on">Bagagli a mano</label>
                <select id="carryOn" class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100">
                  <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option>
                  <option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option>
                </select>
              </div>
            </div>
          </div>

          <!-- payment -->
          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_payment_label">Pagamento</label>
            <div class="mt-2 seg-wrap">
              <button type="button" class="seg" id="payCard" aria-pressed="true"><span id="t_pay_card">Carta</span></button>
              <button type="button" class="seg" id="payCash" aria-pressed="false"><span id="t_pay_cash">Contanti</span></button>
              <button type="button" class="seg" id="payBank" aria-pressed="false"><span id="t_pay_bank">Bonifico</span></button>
              <button type="button" class="seg" id="payApple" aria-pressed="false"><span id="t_pay_apple">Apple/Google Pay</span></button>
            </div>
            <p class="mt-2 text-xs text-neutral-400" id="t_payment_hint">Indica la preferenza: confermiamo in fase di prenotazione.</p>
          </div>

          <!-- invoice -->
          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_invoice_label">Fattura</label>
            <div class="mt-2 rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3">
              <label class="flex items-center gap-3 text-sm text-neutral-200 cursor-pointer select-none">
                <input id="invoice" type="checkbox" class="h-5 w-5 accent-[#25D366]" />
                <span id="t_invoice_check">Richiedo fattura</span>
              </label>
              <p class="mt-2 text-xs text-neutral-400" id="t_invoice_hint">Se selezionato, chiediamo i dati in chat.</p>
            </div>
          </div>

          <!-- name/phone -->
          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_name_label">Nome</label>
            <input id="name" autocomplete="name"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100 placeholder:text-neutral-500"
              placeholder="Es. Marco" />
          </div>

          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_phone_label">Telefono (consigliato)</label>
            <input id="phoneInput" autocomplete="tel" inputmode="tel"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100 placeholder:text-neutral-500"
              placeholder="Es. +39 3xx xxx xxxx" />
          </div>

          <!-- notes -->
          <div class="md:col-span-4">
            <label class="text-sm text-neutral-300" id="t_notes_label">Note (opzionale)</label>
            <textarea id="notes" rows="3" autocomplete="off"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100 placeholder:text-neutral-500"
              placeholder="Es. numero volo, seggiolino, attesa..." ></textarea>
            <p id="notesHint" class="mt-2 text-xs text-neutral-400"></p>
          </div>

          <div class="md:col-span-4 flex flex-wrap gap-3">
            <button type="submit" id="submitBtn"
              class="inline-flex items-center justify-center rounded-2xl bg-[#25D366] px-6 py-3 font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
              <span id="t_submit">Invia su WhatsApp</span>
            </button>

            <button type="button" id="resetBtn"
              class="inline-flex items-center justify-center rounded-2xl border border-white/10 bg-white/5 px-6 py-3 font-semibold hover:bg-white/10">
              <span id="t_reset">Reset</span>
            </button>
          </div>

          <div class="md:col-span-4 text-xs text-neutral-500" id="t_timezone_note">
            Orario: Europe/Rome
          </div>
        </form>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="mx-auto max-w-6xl px-4 py-12">
      <h2 id="t_faq_title" class="text-3xl font-semibold">FAQ</h2>
      <div class="mt-8 grid gap-4 md:grid-cols-2">
        <details class="rounded-3xl border border-white/10 bg-white/5 p-6">
          <summary class="cursor-pointer font-semibold" id="t_faq_q1">Quanto prima devo prenotare?</summary>
          <p class="mt-3 text-neutral-200" id="t_faq_a1">Prima possibile. Per urgenze, scrivici su WhatsApp e verifichiamo subito.</p>
        </details>
        <details class="rounded-3xl border border-white/10 bg-white/5 p-6">
          <summary class="cursor-pointer font-semibold" id="t_faq_q2">Accettate pagamenti con carta?</summary>
          <p class="mt-3 text-neutral-200" id="t_faq_a2">Sì. Carta/contanti/bonifico: confermiamo in fase di prenotazione.</p>
        </details>
      </div>
    </section>
  </main>

  <footer class="border-t border-white/10 bg-neutral-950">
    <div class="mx-auto max-w-6xl px-4 py-10">
      <div class="flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
        <div>
          <div class="font-semibold">NexaRide</div>
          <div class="mt-2 text-sm text-neutral-400">
            WhatsApp: +39 320 878 4091 • Email: <a class="underline hover:text-white" href="mailto:info@nexaride.it">info@nexaride.it</a>
          </div>
          <div class="mt-2 text-xs text-neutral-500">© <span id="y"></span> NexaRide.</div>
          <div class="mt-3 text-xs text-neutral-500">
            <a href="/privacy.html" class="underline hover:text-white" id="t_privacy">Privacy Policy</a>
            <span class="mx-2">·</span>
            <a href="/cookie.html" class="underline hover:text-white" id="t_cookie">Cookie Policy</a>
          </div>
        </div>

        <div class="flex flex-wrap gap-3 text-sm">
          <button id="ctaWAFooter" type="button"
            class="rounded-2xl bg-[#25D366] px-4 py-2 font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
            <span id="t_footer_wa">WhatsApp</span>
          </button>
          <a class="rounded-2xl border border-white/10 bg-white/5 px-4 py-2 font-semibold hover:bg-white/10"
             href="tel:+393208784091"><span id="t_footer_call">Chiama</span></a>
          <button id="ctaFooterToForm" type="button"
            class="rounded-2xl border border-white/10 bg-white/5 px-4 py-2 font-semibold hover:bg-white/10">
            <span id="t_footer_quote">Preventivo</span>
          </button>
        </div>
      </div>
    </div>
  </footer>

  <!-- STICKY MOBILE -->
  <div class="stickybar md:hidden">
    <div class="mx-auto max-w-6xl flex gap-2 px-2">
      <button id="stickyWA" type="button"
        class="flex-1 inline-flex items-center justify-center rounded-2xl bg-[#25D366] px-4 py-3 text-sm font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
        <span id="t_sticky_wa">WhatsApp</span>
      </button>
      <button id="stickyQuote" type="button"
        class="flex-1 inline-flex items-center justify-center rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm font-semibold hover:bg-white/10 active:bg-white/15">
        <span id="t_sticky_quote">Preventivo</span>
      </button>
    </div>
  </div>

  <script>
    // ---------- CONFIG ----------
    const WA_PHONE = "393208784091";
    const VAN_LABEL = "Van / Gruppi (Mercedes Classe V / Vito)";
    const TZ_LABEL = "Europe/Rome";
    const STORAGE_KEY = "nexaride_last_quote_v1";

    // ---------- I18N ----------
    const I18N = {
      it: {
        headerSub: "NCC • Milano • Transfer",
        nav: { milan:"Milano", airports:"Aeroporti", lakecomo:"Lago di Como", fleet:"Flotta", quote:"Preventivo", faq:"FAQ" },
        badges: { b1:"Disponibili 24/7", b2:"Risposta rapida" },
        h1: "NCC e trasferimenti privati – disponibili 24/7",
        sub: "Aeroporti · città · lunghi viaggi · gruppi\nRispondiamo subito su WhatsApp",
        seasonTitle:"Speciale eventi:",
        seasonDesc:"Fashion Week · Salone del Mobile · Stagione Lago di Como",
        microtrust: "Preventivo immediato · Senza app · Persona reale",
        trustline: "Servizio NCC autorizzato · Fattura su richiesta · Pagamenti: carta/contanti/bonifico",
        email: "Email",
        btn: {
          wa:"WhatsApp",
          waHero:"Scrivici ora su WhatsApp",
          fill:"Compila i dettagli",
          checkWa:"Scrivici su WhatsApp",
          fleetQuote:"Richiedi preventivo",
          call:"Chiama",
          openWa:"Apri WhatsApp",
          submit:"Invia su WhatsApp",
          reset:"Reset",
          footerQuote:"Preventivo",
          urgentTopBtn:"WhatsApp urgente",
          urgentTopCall:"Chiama"
        },
        urgentTop: { title:"Entro 2 ore?", desc:"Scrivici “URGENTE” su WhatsApp per risposta immediata." },
        intent: {
          milanTitle:"Milano",
          milanDesc:"City transfer, business, eventi, hotel. Prenotazione rapida su WhatsApp.",
          airTitle:"Aeroporti",
          airDesc:"MXP Malpensa · LIN Linate · BGY Orio. Meet & Greet su richiesta.",
          lakeTitle:"Lago di Como",
          lakeDesc:"Como · Bellagio · Varenna · Menaggio. Ideale per giornata intera o A/R."
        },
        fleet: {
          title:"Categorie veicoli",
          sub:"Seleziona una categoria: precompiliamo il form. Se vuoi un VAN anche in 1–2 passeggeri, puoi sceglierlo.",
          c1t:"Comfort / SUV", c1d:"Toyota RAV4 · ideale fino a 4 passeggeri.",
          c2t:"Executive", c2d:"Mercedes Classe E · business e VIP.",
          c3t:"Van / Gruppi", c3d:"Classe V / Vito · fino a 7 passeggeri + bagagli.",
          quoteHint:"Seleziona un veicolo per precompilare il form.",
          selected:"Selezionato"
        },
        reviews: { title:"Recensioni", desc:"Esempi di feedback (da Google)." },
        quote: {
          title:"Richiedi preventivo",
          sub:"Compila i dettagli e invia su WhatsApp in 1 click.",
          micro:"Preventivo gratuito · Risposta tipica: 2–5 min",
          selectedLabel:"Veicolo selezionato",
          alertTitle:"Compila i campi obbligatori",
          contactPref:"Preferenza contatto",
          contactHint:"Se scegli “Chiamata”, ti richiamiamo appena possibile.",
          prefWA:"WhatsApp",
          prefCall:"Chiamata",
          vehicleLabel:"Categoria veicolo *",
          vehiclePlaceholder:"Seleziona categoria veicolo",
          vehicleHint:"Puoi scegliere il Van anche per 1–2 passeggeri se lo preferisci.",
          serviceLabel:"Tipo servizio",
          service1:"Solo andata",
          service2:"A disposizione (ore)",
          service3:"Andata/Ritorno",
          service4:"Intera giornata",
          arHint:"Se l’orario di ritorno è incerto, scrivi “da definire” nelle Note.",
          returnLabel:"Data / Ora ritorno",
          returnTbd:"Ritorno da definire",
          returnTbdHint:"Se selezionato, non è necessario inserire l’orario di ritorno.",
          hoursLabel:"Ore a disposizione *",
          hoursPlaceholder:"Seleziona",
          hoursHint:"Se scegli “A disposizione”, indica quante ore.",
          fromLabel:"Partenza *",
          toLabel:"Destinazione *",
          fromPh:"Es. Milano centro",
          toPh:"Es. MXP Malpensa",
          travelHint:"Se è aeroporto/stazione, inserisci numero volo/treno nelle Note (se disponibile) per velocizzare la conferma.",
          flightLabel:"Numero volo / treno (facoltativo)",
          meetLabel:"Meet & Greet (arrivi)",
          meetNo:"No",
          meetYes:"Sì",
          meetHint:"Opzione consigliata per aeroporti (cartello in arrivi).",
          stopsLabel:"Fermate (opzionale)",
          stopsPh:"Es. Stazione → Hotel → Ufficio",
          stopsHint:"Scrivi le fermate in ordine.",
          whenLabel:"Data / Ora *",
          urgentHint:"Se è entro 2 ore, scrivici direttamente su WhatsApp.",
          urgentBtn:"WhatsApp urgente",
          paxLabel:"Passeggeri *",
          paxPh:"Seleziona",
          capacityNotice:"Per 5+ passeggeri selezioniamo automaticamente Van / Gruppi.",
          luggageLabel:"Bagagli (consigliato)",
          lugNone:"Nessuno",
          lugSome:"1–2 valigie",
          lugMany:"Molti bagagli",
          luggageVanHint:"Con 4 passeggeri e molti bagagli, spesso è meglio un Van (più spazio).",
          luggageCounts:"Dettaglio bagagli",
          bigSuitcases:"Valigie grandi",
          carryOn:"Bagagli a mano",
          paymentLabel:"Pagamento",
          payCard:"Carta",
          payCash:"Contanti",
          payBank:"Bonifico",
          payApple:"Apple/Google Pay",
          paymentHint:"Indica la preferenza: confermiamo in fase di prenotazione.",
          invoiceLabel:"Fattura",
          invoiceCheck:"Richiedo fattura",
          invoiceHint:"Se selezionato, chiediamo i dati in chat.",
          nameLabel:"Nome",
          namePh:"Es. Marco",
          phoneLabel:"Telefono (consigliato)",
          phonePh:"Es. +39 3xx xxx xxxx",
          notesLabel:"Note (opzionale)",
          notesPh:"Es. numero volo, seggiolino, attesa...",
          timezoneNote:"Orario: Europe/Rome"
        },
        faq: {
          title:"FAQ",
          q1:"Quanto prima devo prenotare?",
          a1:"Prima possibile. Per urgenze, scrivici su WhatsApp e verifichiamo subito.",
          q2:"Accettate pagamenti con carta?",
          a2:"Sì. Carta/contanti/bonifico: confermiamo in fase di prenotazione."
        },
        sticky: { wa:"WhatsApp", quote:"Preventivo" },
        footer: { wa:"WhatsApp", call:"Chiama", quote:"Preventivo" },
        waTemplates: {
          base:
`Ciao! Vorrei un preventivo NCC con NexaRide.

Partenza:
Destinazione:
Fermate (se presenti):
Data:
Ora:
Passeggeri:
Categoria veicolo (Comfort / Executive / Van):
Bagagli:
Pagamento:
Note:`,
          urgent: "URGENTE — richiesta entro 2 ore.\n\n"
        }
      },

      en: {
        headerSub: "Chauffeur • Milan • Transfers",
        nav: { milan:"Milan", airports:"Airports", lakecomo:"Lake Como", fleet:"Fleet", quote:"Quote", faq:"FAQ" },
        badges: { b1:"Available 24/7", b2:"Fast reply" },
        h1: "Chauffeur & private transfers – available 24/7",
        sub: "Airports · city · long distance · groups\nWe reply fast on WhatsApp",
        seasonTitle:"Events & season:",
        seasonDesc:"Fashion Week · Salone del Mobile · Lake Como season",
        microtrust: "Instant quote · No app · Real person",
        trustline: "Licensed chauffeur service · Invoice on request · Payments: card/cash/bank transfer",
        email: "Email",
        btn: {
          wa:"WhatsApp",
          waHero:"Chat on WhatsApp",
          fill:"Fill trip details",
          checkWa:"Chat on WhatsApp",
          fleetQuote:"Get a quote",
          call:"Call",
          openWa:"Open WhatsApp",
          submit:"Send on WhatsApp",
          reset:"Reset",
          footerQuote:"Quote",
          urgentTopBtn:"Urgent WhatsApp",
          urgentTopCall:"Call"
        },
        urgentTop: { title:"Within 2 hours?", desc:"Message us “URGENT” on WhatsApp for immediate reply." },
        intent: {
          milanTitle:"Milan",
          milanDesc:"City transfers, business, events, hotels. Quick booking via WhatsApp.",
          airTitle:"Airports",
          airDesc:"MXP Malpensa · LIN Linate · BGY Orio. Meet & Greet available.",
          lakeTitle:"Lake Como",
          lakeDesc:"Como · Bellagio · Varenna · Menaggio. Great for full-day or round trip."
        },
        fleet: {
          title:"Vehicle categories",
          sub:"Select a category to prefill the form. You can choose a Van even for 1–2 passengers if you prefer more space.",
          c1t:"Comfort / SUV", c1d:"Toyota RAV4 · ideal up to 4 passengers.",
          c2t:"Executive", c2d:"Mercedes E-Class · business and VIP.",
          c3t:"Van / Groups", c3d:"V-Class / Vito · up to 7 passengers + luggage.",
          quoteHint:"Select a vehicle to prefill the form.",
          selected:"Selected"
        },
        reviews: { title:"Reviews", desc:"Examples of feedback (from Google)." },
        quote: {
          title:"Request a quote",
          sub:"Fill the details and send via WhatsApp in 1 click.",
          micro:"Free quote · Typical reply: 2–5 min",
          selectedLabel:"Selected vehicle",
          alertTitle:"Please fill required fields",
          contactPref:"Contact preference",
          contactHint:"If you choose “Call”, we’ll call you back as soon as possible.",
          prefWA:"WhatsApp",
          prefCall:"Call",
          vehicleLabel:"Vehicle category *",
          vehiclePlaceholder:"Select vehicle category",
          vehicleHint:"You can choose a Van even for 1–2 passengers if you prefer more space.",
          serviceLabel:"Service type",
          service1:"One-way",
          service2:"Hourly / on disposal",
          service3:"Round trip",
          service4:"Full day",
          arHint:"If return time is unknown, write “to be defined” in Notes.",
          returnLabel:"Return date / time",
          returnTbd:"Return time to be defined",
          returnTbdHint:"If selected, return time is not required.",
          hoursLabel:"Hours on disposal *",
          hoursPlaceholder:"Select",
          hoursHint:"If you choose “Hourly”, select the number of hours.",
          fromLabel:"Pickup *",
          toLabel:"Drop-off *",
          fromPh:"e.g., Milan city center",
          toPh:"e.g., MXP Malpensa Airport",
          travelHint:"If airport/station, add flight/train number in Notes (if available) to speed up confirmation.",
          flightLabel:"Flight / train number (optional)",
          meetLabel:"Meet & Greet (arrivals)",
          meetNo:"No",
          meetYes:"Yes",
          meetHint:"Recommended for airports (sign at arrivals).",
          stopsLabel:"Stops (optional)",
          stopsPh:"e.g., Station → Hotel → Office",
          stopsHint:"Write stops in order.",
          whenLabel:"Date / Time *",
          urgentHint:"If within 2 hours, please message us directly on WhatsApp.",
          urgentBtn:"Urgent WhatsApp",
          paxLabel:"Passengers *",
          paxPh:"Select",
          capacityNotice:"For 5+ passengers we automatically select Van / Groups.",
          luggageLabel:"Luggage (recommended)",
          lugNone:"None",
          lugSome:"1–2 suitcases",
          lugMany:"Many luggage",
          luggageVanHint:"With 4 passengers and many luggage, a Van is often better (more space).",
          luggageCounts:"Luggage details",
          bigSuitcases:"Large suitcases",
          carryOn:"Carry-on",
          paymentLabel:"Payment",
          payCard:"Card",
          payCash:"Cash",
          payBank:"Bank transfer",
          payApple:"Apple/Google Pay",
          paymentHint:"Choose your preference: confirmed during booking.",
          invoiceLabel:"Invoice",
          invoiceCheck:"I need an invoice",
          invoiceHint:"If selected, we’ll ask details in chat.",
          nameLabel:"Name",
          namePh:"e.g., Mark",
          phoneLabel:"Phone (recommended)",
          phonePh:"e.g., +39 ...",
          notesLabel:"Notes (optional)",
          notesPh:"e.g., flight number, child seat, waiting time...",
          timezoneNote:"Time zone: Europe/Rome"
        },
        faq: {
          title:"FAQ",
          q1:"How early should I book?",
          a1:"As soon as possible. For urgent requests, message us on WhatsApp and we’ll check availability.",
          q2:"Do you accept card payments?",
          a2:"Yes. Card/cash/bank transfer: confirmed during booking."
        },
        sticky: { wa:"WhatsApp", quote:"Quote" },
        footer: { wa:"WhatsApp", call:"Call", quote:"Quote" },
        waTemplates: {
          base:
`Hi! I'd like a quote with NexaRide.

Pickup:
Drop-off:
Stops (if any):
Date:
Time:
Passengers:
Vehicle category (Comfort / Executive / Van):
Luggage:
Payment:
Notes:`,
          urgent: "URGENT — request within 2 hours.\n\n"
        }
      }
    };

    // ---------- UTIL ----------
    function openWhatsAppWithText(text) {
      const url = `https://wa.me/${WA_PHONE}?text=${encodeURIComponent(text)}`;
      window.open(url, "_blank", "noopener");
    }

    function scrollToQuoteAndFocus() {
      document.getElementById("quote").scrollIntoView({ behavior: "smooth", block: "start" });
      setTimeout(() => document.getElementById("vehicle")?.focus({ preventScroll: true }), 350);
    }

    function setMinDateTimeNow(el) {
      if (!el) return;
      const now = new Date();
      const pad = (n) => String(n).padStart(2, "0");
      const min = `${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())}T${pad(now.getHours())}:${pad(now.getMinutes())}`;
      el.min = min;
    }

    function setDefaultDateTimePlus60(el) {
      if (!el || el.value) return;
      const d = new Date();
      d.setMinutes(d.getMinutes() + 60);
      const pad = (n) => String(n).padStart(2, "0");
      el.value = `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}T${pad(d.getHours())}:${pad(d.getMinutes())}`;
    }

    function parseDateTimeLocal(value) {
      if (!value) return null;
      const d = new Date(value);
      return isNaN(d.getTime()) ? null : d;
    }

    function formatDateTime(lang, dtLocalValue) {
      if (!dtLocalValue) return "";
      const d = new Date(dtLocalValue);
      if (isNaN(d.getTime())) return dtLocalValue;
      return d.toLocaleString(lang === "en" ? "en-GB" : "it-IT", {
        year:"numeric", month:"2-digit", day:"2-digit", hour:"2-digit", minute:"2-digit"
      });
    }

    function isAirportOrStationText(text) {
      const t = (text || "").toLowerCase();
      const keys = [
        "mxp","malpensa","lin","linate","bgy","orio","orio al serio","airport","terminal","arrivals","departures",
        "stazione","station","train","centrale","garibaldi","cadorna","rogoredo","lambrate"
      ];
      return keys.some(k => t.includes(k));
    }

    function setText(id, value) {
      const el = document.getElementById(id);
      if (!el) return;
      el.textContent = value;
    }

    // ---------- ELEMENTS ----------
    const langIT = document.getElementById("langIT");
    const langEN = document.getElementById("langEN");

    const vehicleSelect = document.getElementById("vehicle");
    const paxSelect = document.getElementById("pax");
    const whenEl = document.getElementById("when");
    const fromEl = document.getElementById("from");
    const toEl = document.getElementById("to");
    const stopsEl = document.getElementById("stops");
    const serviceTypeEl = document.getElementById("serviceType");
    const notesEl = document.getElementById("notes");
    const nameEl = document.getElementById("name");
    const phoneEl = document.getElementById("phoneInput");
    const invoiceEl = document.getElementById("invoice");

    const returnWrap = document.getElementById("returnWrap");
    const returnWhenEl = document.getElementById("returnWhen");
    const returnTbdEl = document.getElementById("returnTbd");

    const hoursWrap = document.getElementById("hoursWrap");
    const hoursEl = document.getElementById("hours");

    const travelHint = document.getElementById("travelHint");
    const flightWrap = document.getElementById("flightWrap");
    const flightNumberEl = document.getElementById("flightNumber");

    const meetWrap = document.getElementById("meetWrap");
    const meetNo = document.getElementById("meetNo");
    const meetYes = document.getElementById("meetYes");

    const urgentHint = document.getElementById("urgentHint");
    const urgentWA = document.getElementById("urgentWA");

    const urgentTopBar = document.getElementById("urgentTopBar");
    const urgentTopWA = document.getElementById("urgentTopWA");

    const capacityNotice = document.getElementById("capacityNotice");
    const arHint = document.getElementById("arHint");

    const lugNone = document.getElementById("lugNone");
    const lugSome = document.getElementById("lugSome");
    const lugMany = document.getElementById("lugMany");
    const luggageVanHint = document.getElementById("luggageVanHint");

    const bigSuitcasesEl = document.getElementById("bigSuitcases");
    const carryOnEl = document.getElementById("carryOn");

    const payCard = document.getElementById("payCard");
    const payCash = document.getElementById("payCash");
    const payBank = document.getElementById("payBank");
    const payApple = document.getElementById("payApple");

    const formAlert = document.getElementById("formAlert");
    const formAlertText = document.getElementById("formAlertText");

    const selectedVehicleWrap = document.getElementById("selectedVehicleWrap");
    const selectedVehicleLabel = document.getElementById("selectedVehicleLabel");

    const prefWA = document.getElementById("prefWA");
    const prefCall = document.getElementById("prefCall");

    const notesHintEl = document.getElementById("notesHint");
    const fleetCards = Array.from(document.querySelectorAll(".fleet-card"));

    // ---------- STATE ----------
    let LANG = (localStorage.getItem("nexaride_lang") || "it");
    let contactPref = "WhatsApp"; // "WhatsApp" or "Call"
    let luggage = "none";         // none|some|many
    let meetGreet = "no";         // no|yes
    let payment = "card";         // card|cash|bank|apple

    // ---------- UI helpers ----------
    function clearFleetSelection() { fleetCards.forEach(c => c.classList.remove("is-selected")); }
    function selectFleetByLabel(label) {
      clearFleetSelection();
      const card = fleetCards.find(c => c.getAttribute("data-vehicle-label") === label);
      if (card) card.classList.add("is-selected");
    }

    function updateSelectedVehicleUI() {
      const v = (vehicleSelect.value || "").trim();
      if (v) {
        selectedVehicleLabel.textContent = v;
        selectedVehicleWrap.classList.remove("hidden");
      } else {
        selectedVehicleWrap.classList.add("hidden");
        selectedVehicleLabel.textContent = "";
      }
    }

    function getPaxNumber() {
      const v = (paxSelect.value || "").trim();
      const n = parseInt(v, 10);
      return Number.isFinite(n) ? n : null;
    }

    function isVanSelected() { return (vehicleSelect.value || "") === VAN_LABEL; }

    function enforceCapacityRule() {
      const paxN = getPaxNumber();
      if (!paxN) { capacityNotice.classList.add("hidden"); return; }
      if (paxN >= 5) {
        capacityNotice.classList.remove("hidden");
        if (!isVanSelected()) {
          vehicleSelect.value = VAN_LABEL;
          selectFleetByLabel(VAN_LABEL);
          updateSelectedVehicleUI();
        }
      } else {
        capacityNotice.classList.add("hidden");
      }
    }

    function setContactPref(v) {
      contactPref = v;
      prefWA.setAttribute("aria-pressed", v === "WhatsApp" ? "true" : "false");
      prefCall.setAttribute("aria-pressed", v === "Call" ? "true" : "false");
    }

    function setLuggage(v) {
      luggage = v;
      lugNone.setAttribute("aria-pressed", v === "none" ? "true" : "false");
      lugSome.setAttribute("aria-pressed", v === "some" ? "true" : "false");
      lugMany.setAttribute("aria-pressed", v === "many" ? "true" : "false");
      updateNotesSuggestion();
      updateContextHints();
    }

    function setMeetGreet(v) {
      meetGreet = v;
      meetNo.setAttribute("aria-pressed", v === "no" ? "true" : "false");
      meetYes.setAttribute("aria-pressed", v === "yes" ? "true" : "false");
    }

    function setPayment(v) {
      payment = v;
      payCard.setAttribute("aria-pressed", v === "card" ? "true" : "false");
      payCash.setAttribute("aria-pressed", v === "cash" ? "true" : "false");
      payBank.setAttribute("aria-pressed", v === "bank" ? "true" : "false");
      payApple.setAttribute("aria-pressed", v === "apple" ? "true" : "false");
    }

    function serviceNeedsReturn() {
      const st = (serviceTypeEl.value || "").toLowerCase();
      return LANG === "en" ? st.includes("round") : st.includes("ritorno");
    }

    function serviceNeedsHours() {
      const st = (serviceTypeEl.value || "").toLowerCase();
      return LANG === "en" ? st.includes("hour") : st.includes("dispos");
    }

    function updateServiceConditionalFields() {
      const needsReturn = serviceNeedsReturn();
      const needsHours = serviceNeedsHours();

      // show/hide wrap
      returnWrap.classList.toggle("hidden", !needsReturn);
      hoursWrap.classList.toggle("hidden", !needsHours);

      // required logic
      if (needsReturn) {
        setMinDateTimeNow(returnWhenEl);
        if (returnTbdEl.checked) {
          returnWhenEl.required = false;
          returnWhenEl.disabled = true;
          returnWhenEl.value = "";
        } else {
          returnWhenEl.disabled = false;
          returnWhenEl.required = false; // optional by default; user can set if wants
        }
      } else {
        returnTbdEl.checked = false;
        returnWhenEl.required = false;
        returnWhenEl.disabled = false;
        returnWhenEl.value = "";
      }

      if (needsHours) {
        hoursEl.required = true;
      } else {
        hoursEl.required = false;
        hoursEl.value = "";
      }

      // ar hint text visible when round trip
      arHint.classList.toggle("hidden", !needsReturn);

      updateNotesSuggestion();
    }

    function updateTravelConditionalFields() {
      const show = isAirportOrStationText(fromEl.value) || isAirportOrStationText(toEl.value);
      travelHint.classList.toggle("hidden", !show);
      flightWrap.classList.toggle("hidden", !show);
      meetWrap.classList.toggle("hidden", !show);
      if (!show) {
        flightNumberEl.value = "";
        setMeetGreet("no");
      }
    }

    function updateUrgentHints() {
      const dt = parseDateTimeLocal(whenEl.value);
      if (!dt) {
        urgentHint.classList.add("hidden");
        urgentTopBar.classList.add("hidden");
        return;
      }
      const diffHours = (dt.getTime() - Date.now()) / 3600000;
      const isUrgent = (diffHours >= 0 && diffHours <= 2);
      urgentHint.classList.toggle("hidden", !isUrgent);
      urgentTopBar.classList.toggle("hidden", !isUrgent);
    }

    function updateContextHints() {
      updateTravelConditionalFields();
      updateUrgentHints();

      const paxN = getPaxNumber();
      luggageVanHint.classList.toggle("hidden", !(paxN === 4 && luggage === "many"));
    }

    function buildNotesSuggestion() {
      const tips = [];
      const airport = isAirportOrStationText(fromEl.value) || isAirportOrStationText(toEl.value);
      if (airport) tips.push(LANG === "en" ? "flight/train number" : "numero volo/treno");
      if (serviceNeedsHours()) tips.push(LANG === "en" ? "hours/time range" : "ore/fascia oraria");
      if (serviceNeedsReturn()) tips.push(LANG === "en" ? "return time (if known)" : "orario ritorno (se noto)");
      if (meetGreet === "yes" && airport) tips.push(LANG === "en" ? "Meet & Greet" : "Meet & Greet");
      if (isVanSelected()) tips.push(LANG === "en" ? "luggage qty/size" : "bagagli (q.tà/dimensioni)");
      if (invoiceEl.checked) tips.push(LANG === "en" ? "invoice details" : "dati fattura");
      return tips;
    }

    function updateNotesSuggestion() {
      const tips = buildNotesSuggestion();
      notesHintEl.textContent = tips.length ? ((LANG === "en" ? "Suggestion: " : "Suggerimento: ") + tips.join(" · ")) : "";
    }

    function showFormAlert(missingLabels) {
      formAlertText.textContent = (LANG === "en" ? "Missing: " : "Manca: ") + missingLabels.join(" · ");
      formAlert.classList.remove("hidden");
    }
    function hideFormAlert() { formAlert.classList.add("hidden"); formAlertText.textContent = ""; }

    // ---------- WhatsApp messages ----------
    function getBaseWhatsAppMessage(isUrgent=false, contextTag="") {
      const T = I18N[LANG];
      let msg = "";
      if (isUrgent) msg += T.waTemplates.urgent;
      if (contextTag) {
        msg += (LANG === "en" ? `Context: ${contextTag}\n\n` : `Contesto: ${contextTag}\n\n`);
      }
      msg += T.waTemplates.base;
      return msg;
    }

    function getLuggageLabel() {
      const T = I18N[LANG];
      return (luggage === "none") ? T.quote.lugNone : (luggage === "some") ? T.quote.lugSome : T.quote.lugMany;
    }

    function getPaymentLabel() {
      const T = I18N[LANG];
      if (payment === "card") return T.quote.payCard;
      if (payment === "cash") return T.quote.payCash;
      if (payment === "bank") return T.quote.payBank;
      return T.quote.payApple;
    }

    function buildFormWhatsAppMessage(isUrgent=false, contextTag="") {
      const T = I18N[LANG];

      const vehicle = (vehicleSelect.value || "").trim();
      const serviceType = (serviceTypeEl.value || "").trim();
      const from = (fromEl.value || "").trim();
      const to = (toEl.value || "").trim();
      const stops = (stopsEl.value || "").trim();
      const whenRaw = (whenEl.value || "").trim();
      const whenFmt = formatDateTime(LANG, whenRaw);
      const pax = (paxSelect.value || "").trim();
      const name = (nameEl.value || "").trim();
      const phone = (phoneEl.value || "").trim();
      const notes = (notesEl.value || "").trim();
      const invoice = invoiceEl.checked ? (LANG === "en" ? "Yes" : "Sì") : (LANG === "en" ? "No" : "No");

      const flight = (flightNumberEl.value || "").trim();
      const meet = (meetGreet === "yes") ? (LANG === "en" ? "Yes" : "Sì") : (LANG === "en" ? "No" : "No");

      const bigSuitcases = bigSuitcasesEl.value;
      const carryOn = carryOnEl.value;

      const ret = returnWhenEl.value ? formatDateTime(LANG, returnWhenEl.value) : "";
      const retTbd = returnTbdEl.checked;
      const hours = (hoursEl.value || "").trim();

      let msg = "";
      if (isUrgent) msg += T.waTemplates.urgent;
      if (contextTag) msg += (LANG === "en" ? `Context: ${contextTag}\n\n` : `Contesto: ${contextTag}\n\n`);

      if (LANG === "en") {
        msg += `Hi! I'd like a quote with NexaRide.\n\n`;
        msg += `Service type: ${serviceType}\n`;
        if (serviceNeedsHours()) msg += `Hours: ${hours}\n`;
        if (serviceNeedsReturn()) msg += `Return: ${retTbd ? "To be defined" : (ret || "—")}\n`;
        msg += `Vehicle category: ${vehicle}\n`;
        msg += `Pickup: ${from}\n`;
        msg += `Drop-off: ${to}\n`;
        if (stops) msg += `Stops: ${stops}\n`;
        msg += `Date/Time: ${whenFmt} (${TZ_LABEL})\n`;
        msg += `Passengers: ${pax}\n`;
        if (!flightWrap.classList.contains("hidden") && flight) msg += `Flight/Train: ${flight}\n`;
        if (!meetWrap.classList.contains("hidden")) msg += `Meet & Greet: ${meet}\n`;
        msg += `Luggage: ${getLuggageLabel()} (Large: ${bigSuitcases}, Carry-on: ${carryOn})\n`;
        msg += `Payment: ${getPaymentLabel()}\n`;
        msg += `Invoice: ${invoice}\n`;
        msg += `Contact preference: ${contactPref}\n`;
        if (name) msg += `Name: ${name}\n`;
        if (phone) msg += `Phone: ${phone}\n`;
        if (notes) msg += `Notes: ${notes}\n`;
        if (contactPref === "Call") msg += `\nPlease call me to confirm availability and price. Thank you.\n`;
      } else {
        msg += `Ciao! Vorrei un preventivo NCC con NexaRide.\n\n`;
        msg += `Tipo servizio: ${serviceType}\n`;
        if (serviceNeedsHours()) msg += `Ore: ${hours}\n`;
        if (serviceNeedsReturn()) msg += `Ritorno: ${retTbd ? "Da definire" : (ret || "—")}\n`;
        msg += `Categoria veicolo: ${vehicle}\n`;
        msg += `Partenza: ${from}\n`;
        msg += `Destinazione: ${to}\n`;
        if (stops) msg += `Fermate: ${stops}\n`;
        msg += `Data/Ora: ${whenFmt} (${TZ_LABEL})\n`;
        msg += `Passeggeri: ${pax}\n`;
        if (!flightWrap.classList.contains("hidden") && flight) msg += `Volo/Treno: ${flight}\n`;
        if (!meetWrap.classList.contains("hidden")) msg += `Meet & Greet: ${meet}\n`;
        msg += `Bagagli: ${getLuggageLabel()} (Grandi: ${bigSuitcases}, Mano: ${carryOn})\n`;
        msg += `Pagamento: ${getPaymentLabel()}\n`;
        msg += `Fattura: ${invoice}\n`;
        msg += `Preferenza contatto: ${contactPref === "Call" ? "Chiamata" : "WhatsApp"}\n`;
        if (name) msg += `Nome: ${name}\n`;
        if (phone) msg += `Telefono: ${phone}\n`;
        if (notes) msg += `Note: ${notes}\n`;
        if (contactPref === "Call") msg += `\nMi puoi chiamare per confermare disponibilità e prezzo? Grazie.\n`;
      }

      return msg;
    }

    // ---------- Language apply ----------
    function applyLang() {
      const T = I18N[LANG];

      document.documentElement.lang = LANG;

      // header
      setText("t_header_sub", T.headerSub);
      setText("t_nav_milan", T.nav.milan);
      setText("t_nav_airports", T.nav.airports);
      setText("t_nav_lakecomo", T.nav.lakecomo);
      setText("t_nav_fleet", T.nav.fleet);
      setText("t_nav_quote", T.nav.quote);
      setText("t_nav_faq", T.nav.faq);

      // hero
      setText("t_badge_1", T.badges.b1);
      setText("t_badge_2", T.badges.b2);
      setText("t_h1", T.h1);
      document.getElementById("t_sub").innerText = T.sub;
      setText("t_season_title", T.seasonTitle);
      setText("t_season_desc", T.seasonDesc);
      setText("t_microtrust", T.microtrust);
      setText("t_trustline", T.trustline);
      setText("t_email_label", T.email);

      // buttons
      setText("t_btn_whatsapp_top", T.btn.wa);
      setText("t_btn_wa_hero", T.btn.waHero);
      setText("t_btn_fill_details", T.btn.fill);
      setText("t_btn_check_wa", T.btn.checkWa);
      setText("t_btn_fleet_quote", T.btn.fleetQuote);
      setText("t_btn_call", T.btn.call);
      setText("t_btn_open_wa", T.btn.openWa);
      setText("t_submit", T.btn.submit);
      setText("t_reset", T.btn.reset);

      // urgent top
      setText("t_urgent_top_title", T.urgentTop.title);
      setText("t_urgent_top_desc", T.urgentTop.desc);
      setText("t_urgent_top_btn", T.btn.urgentTopBtn);
      setText("t_urgent_top_call", T.btn.urgentTopCall);

      // intent
      setText("t_intent_milan_title", T.intent.milanTitle);
      setText("t_intent_milan_desc", T.intent.milanDesc);
      setText("t_intent_air_title", T.intent.airTitle);
      setText("t_intent_air_desc", T.intent.airDesc);
      setText("t_intent_lake_title", T.intent.lakeTitle);
      setText("t_intent_lake_desc", T.intent.lakeDesc);

      // fleet
      setText("t_fleet_title", T.fleet.title);
      setText("t_fleet_sub", T.fleet.sub);
      setText("t_fleet_c1_t", T.fleet.c1t); setText("t_fleet_c1_d", T.fleet.c1d);
      setText("t_fleet_c2_t", T.fleet.c2t); setText("t_fleet_c2_d", T.fleet.c2d);
      setText("t_fleet_c3_t", T.fleet.c3t); setText("t_fleet_c3_d", T.fleet.c3d);
      setText("t_fleet_hint", T.fleet.quoteHint);
      setText("t_selected_badge", T.fleet.selected);
      setText("t_selected_badge2", T.fleet.selected);
      setText("t_selected_badge3", T.fleet.selected);

      // reviews
      setText("t_reviews_title", T.reviews.title);
      setText("t_reviews_desc", T.reviews.desc);

      // quote
      setText("t_quote_title", T.quote.title);
      setText("t_quote_sub", T.quote.sub);
      setText("t_quote_micro", T.quote.micro);
      setText("t_selected_label", T.quote.selectedLabel);
      setText("t_email_label2", T.email);
      setText("t_form_alert_title", T.quote.alertTitle);

      setText("t_contact_pref", T.quote.contactPref);
      setText("t_contact_pref_hint", T.quote.contactHint);
      prefWA.textContent = T.quote.prefWA;
      prefCall.textContent = T.quote.prefCall;

      setText("t_vehicle_label", T.quote.vehicleLabel);
      setText("t_vehicle_placeholder", T.quote.vehiclePlaceholder);
      setText("t_vehicle_hint", T.quote.vehicleHint);

      setText("t_service_label", T.quote.serviceLabel);
      document.getElementById("t_service_1").textContent = T.quote.service1;
      document.getElementById("t_service_2").textContent = T.quote.service2;
      document.getElementById("t_service_3").textContent = T.quote.service3;
      document.getElementById("t_service_4").textContent = T.quote.service4;

      setText("t_ar_hint", T.quote.arHint);
      setText("t_return_label", T.quote.returnLabel);
      setText("t_return_tbd", T.quote.returnTbd);
      setText("t_return_tbd_hint", T.quote.returnTbdHint);
      setText("t_hours_label", T.quote.hoursLabel);
      setText("t_hours_placeholder", T.quote.hoursPlaceholder);
      setText("t_hours_hint", T.quote.hoursHint);

      setText("t_from_label", T.quote.fromLabel);
      setText("t_to_label", T.quote.toLabel);
      fromEl.placeholder = T.quote.fromPh;
      toEl.placeholder = T.quote.toPh;

      setText("t_travel_hint", T.quote.travelHint);
      setText("t_flight_label", T.quote.flightLabel);

      setText("t_meet_label", T.quote.meetLabel);
      setText("t_meet_no", T.quote.meetNo);
      setText("t_meet_yes", T.quote.meetYes);
      setText("t_meet_hint", T.quote.meetHint);

      setText("t_stops_label", T.quote.stopsLabel);
      stopsEl.placeholder = T.quote.stopsPh;
      setText("t_stops_hint", T.quote.stopsHint);

      setText("t_when_label", T.quote.whenLabel);
      setText("t_urgent_hint", T.quote.urgentHint);
      setText("t_urgent_btn", T.quote.urgentBtn);

      setText("t_pax_label", T.quote.paxLabel);
      setText("t_pax_placeholder", T.quote.paxPh);
      setText("t_capacity_notice", T.quote.capacityNotice);

      setText("t_luggage_label", T.quote.luggageLabel);
      setText("t_lug_none", T.quote.lugNone);
      setText("t_lug_some", T.quote.lugSome);
      setText("t_lug_many", T.quote.lugMany);
      setText("t_luggage_van_hint", T.quote.luggageVanHint);

      setText("t_luggage_counts_label", T.quote.luggageCounts);
      setText("t_big_suitcases", T.quote.bigSuitcases);
      setText("t_carry_on", T.quote.carryOn);

      setText("t_payment_label", T.quote.paymentLabel);
      setText("t_pay_card", T.quote.payCard);
      setText("t_pay_cash", T.quote.payCash);
      setText("t_pay_bank", T.quote.payBank);
      setText("t_pay_apple", T.quote.payApple);
      setText("t_payment_hint", T.quote.paymentHint);

      setText("t_invoice_label", T.quote.invoiceLabel);
      setText("t_invoice_check", T.quote.invoiceCheck);
      setText("t_invoice_hint", T.quote.invoiceHint);

      setText("t_name_label", T.quote.nameLabel);
      nameEl.placeholder = T.quote.namePh;
      setText("t_phone_label", T.quote.phoneLabel);
      phoneEl.placeholder = T.quote.phonePh;

      setText("t_notes_label", T.quote.notesLabel);
      notesEl.placeholder = T.quote.notesPh;

      setText("t_timezone_note", T.quote.timezoneNote);

      // faq
      setText("t_faq_title", T.faq.title);
      setText("t_faq_q1", T.faq.q1);
      setText("t_faq_a1", T.faq.a1);
      setText("t_faq_q2", T.faq.q2);
      setText("t_faq_a2", T.faq.a2);

      // sticky/footer
      setText("t_footer_wa", T.footer.wa);
      setText("t_footer_call", T.footer.call);
      setText("t_footer_quote", T.footer.quote);
      setText("t_sticky_wa", T.sticky.wa);
      setText("t_sticky_quote", T.sticky.quote);

      // activate lang buttons
      langIT.classList.toggle("is-active", LANG === "it");
      langEN.classList.toggle("is-active", LANG === "en");

      updateServiceConditionalFields();
      updateNotesSuggestion();
      updateContextHints();
    }

    function setLanguage(lang) {
      LANG = lang;
      localStorage.setItem("nexaride_lang", LANG);
      applyLang();
    }

    // ---------- Save/restore last quote ----------
    function saveToStorage() {
      const payload = {
        lang: LANG,
        contactPref,
        luggage,
        meetGreet,
        payment,
        vehicle: vehicleSelect.value || "",
        serviceType: serviceTypeEl.value || "",
        hours: hoursEl.value || "",
        from: fromEl.value || "",
        to: toEl.value || "",
        stops: stopsEl.value || "",
        when: whenEl.value || "",
        returnWhen: returnWhenEl.value || "",
        returnTbd: !!returnTbdEl.checked,
        flightNumber: flightNumberEl.value || "",
        bigSuitcases: bigSuitcasesEl.value || "0",
        carryOn: carryOnEl.value || "0",
        pax: paxSelect.value || "",
        invoice: !!invoiceEl.checked,
        name: nameEl.value || "",
        phone: phoneEl.value || "",
        notes: notesEl.value || ""
      };
      try { localStorage.setItem(STORAGE_KEY, JSON.stringify(payload)); } catch(e) {}
    }

    function restoreFromStorage() {
      let raw = null;
      try { raw = localStorage.getItem(STORAGE_KEY); } catch(e) {}
      if (!raw) return;
      let payload = null;
      try { payload = JSON.parse(raw); } catch(e) { return; }
      if (!payload || typeof payload !== "object") return;

      // restore
      if (payload.lang === "it" || payload.lang === "en") LANG = payload.lang;

      vehicleSelect.value = payload.vehicle || "";
      serviceTypeEl.value = payload.serviceType || serviceTypeEl.value;
      hoursEl.value = payload.hours || "";
      fromEl.value = payload.from || "";
      toEl.value = payload.to || "";
      stopsEl.value = payload.stops || "";
      whenEl.value = payload.when || "";
      returnWhenEl.value = payload.returnWhen || "";
      returnTbdEl.checked = !!payload.returnTbd;
      flightNumberEl.value = payload.flightNumber || "";
      bigSuitcasesEl.value = payload.bigSuitcases || "0";
      carryOnEl.value = payload.carryOn || "0";
      paxSelect.value = payload.pax || "";
      invoiceEl.checked = !!payload.invoice;
      nameEl.value = payload.name || "";
      phoneEl.value = payload.phone || "";
      notesEl.value = payload.notes || "";

      setContactPref(payload.contactPref === "Call" ? "Call" : "WhatsApp");
      setLuggage(["none","some","many"].includes(payload.luggage) ? payload.luggage : "none");
      setMeetGreet(payload.meetGreet === "yes" ? "yes" : "no");
      setPayment(["card","cash","bank","apple"].includes(payload.payment) ? payload.payment : "card");

      selectFleetByLabel(vehicleSelect.value);
      updateSelectedVehicleUI();
      enforceCapacityRule();
    }

    // ---------- Events ----------
    document.getElementById("y").textContent = new Date().getFullYear();

    // language
    langIT.addEventListener("click", () => setLanguage("it"));
    langEN.addEventListener("click", () => setLanguage("en"));

    // CTAs -> WhatsApp base
    document.getElementById("ctaWATop").addEventListener("click", () => openWhatsAppWithText(getBaseWhatsAppMessage(false, "")));
    document.getElementById("ctaWAHero").addEventListener("click", () => openWhatsAppWithText(getBaseWhatsAppMessage(false, "")));
    document.getElementById("ctaWACard").addEventListener("click", () => openWhatsAppWithText(getBaseWhatsAppMessage(false, "")));
    document.getElementById("ctaWAFooter").addEventListener("click", () => openWhatsAppWithText(getBaseWhatsAppMessage(false, "")));
    document.getElementById("ctaWAOpenGeneric").addEventListener("click", () => openWhatsAppWithText(getBaseWhatsAppMessage(false, "")));
    document.getElementById("stickyWA").addEventListener("click", () => openWhatsAppWithText(getBaseWhatsAppMessage(false, "")));

    // urgent
    urgentWA.addEventListener("click", () => openWhatsAppWithText(getBaseWhatsAppMessage(true, "")));
    urgentTopWA.addEventListener("click", () => openWhatsAppWithText(getBaseWhatsAppMessage(true, "")));

    // CTAs -> form
    document.getElementById("ctaScrollToForm").addEventListener("click", () => scrollToQuoteAndFocus());
    document.getElementById("ctaFleetToForm").addEventListener("click", () => scrollToQuoteAndFocus());
    document.getElementById("stickyQuote").addEventListener("click", () => scrollToQuoteAndFocus());
    document.getElementById("ctaFooterToForm").addEventListener("click", () => scrollToQuoteAndFocus());

    // intent buttons (context prefill + message)
    function prefillIntent(context) {
      // light prefill only, keep user in control
      if (context === "Airports") {
        if (!toEl.value && !fromEl.value) toEl.value = (LANG === "en" ? "MXP Malpensa Airport" : "MXP Malpensa");
        updateTravelConditionalFields();
      }
      if (context === "Lake Como") {
        if (!toEl.value && !fromEl.value) toEl.value = (LANG === "en" ? "Lake Como (Como/Bellagio)" : "Lago di Como (Como/Bellagio)");
      }
      saveToStorage();
    }
    document.getElementById("intentMilanWA").addEventListener("click", () => { prefillIntent("Milan"); openWhatsAppWithText(getBaseWhatsAppMessage(false, "Milan")); });
    document.getElementById("intentMilanQuote").addEventListener("click", () => { prefillIntent("Milan"); scrollToQuoteAndFocus(); });

    document.getElementById("intentAirWA").addEventListener("click", () => { prefillIntent("Airports"); openWhatsAppWithText(getBaseWhatsAppMessage(false, "Airports")); });
    document.getElementById("intentAirQuote").addEventListener("click", () => { prefillIntent("Airports"); scrollToQuoteAndFocus(); });

    document.getElementById("intentLakeWA").addEventListener("click", () => { prefillIntent("Lake Como"); openWhatsAppWithText(getBaseWhatsAppMessage(false, "Lake Como")); });
    document.getElementById("intentLakeQuote").addEventListener("click", () => { prefillIntent("Lake Como"); scrollToQuoteAndFocus(); });

    // fleet selection
    fleetCards.forEach(card => {
      card.addEventListener("click", () => {
        const label = card.getAttribute("data-vehicle-label");
        if (label) {
          vehicleSelect.value = label;
          selectFleetByLabel(label);
          updateSelectedVehicleUI();
          enforceCapacityRule();
          updateNotesSuggestion();
          updateContextHints();
          saveToStorage();
          scrollToQuoteAndFocus();
        }
      });
    });

    // contact preference
    prefWA.addEventListener("click", () => { setContactPref("WhatsApp"); saveToStorage(); });
    prefCall.addEventListener("click", () => { setContactPref("Call"); saveToStorage(); });

    // luggage
    lugNone.addEventListener("click", () => { setLuggage("none"); saveToStorage(); });
    lugSome.addEventListener("click", () => { setLuggage("some"); saveToStorage(); });
    lugMany.addEventListener("click", () => { setLuggage("many"); saveToStorage(); });

    // meet & greet
    meetNo.addEventListener("click", () => { setMeetGreet("no"); saveToStorage(); });
    meetYes.addEventListener("click", () => { setMeetGreet("yes"); saveToStorage(); });

    // payment
    payCard.addEventListener("click", () => { setPayment("card"); saveToStorage(); });
    payCash.addEventListener("click", () => { setPayment("cash"); saveToStorage(); });
    payBank.addEventListener("click", () => { setPayment("bank"); saveToStorage(); });
    payApple.addEventListener("click", () => { setPayment("apple"); saveToStorage(); });

    // reactive hints
    serviceTypeEl.addEventListener("change", () => { updateServiceConditionalFields(); updateContextHints(); saveToStorage(); });
    returnTbdEl.addEventListener("change", () => { updateServiceConditionalFields(); saveToStorage(); });

    vehicleSelect.addEventListener("change", () => {
      selectFleetByLabel(vehicleSelect.value);
      updateSelectedVehicleUI();
      enforceCapacityRule();
      updateNotesSuggestion();
      updateContextHints();
      saveToStorage();
    });

    paxSelect.addEventListener("change", () => { enforceCapacityRule(); updateNotesSuggestion(); updateContextHints(); saveToStorage(); });

    fromEl.addEventListener("input", () => { updateContextHints(); saveToStorage(); });
    toEl.addEventListener("input", () => { updateContextHints(); saveToStorage(); });

    whenEl.addEventListener("focus", () => setMinDateTimeNow(whenEl));
    whenEl.addEventListener("change", () => { updateContextHints(); saveToStorage(); });

    flightNumberEl.addEventListener("input", () => saveToStorage());
    stopsEl.addEventListener("input", () => saveToStorage());
    returnWhenEl.addEventListener("change", () => saveToStorage());
    hoursEl.addEventListener("change", () => saveToStorage());
    bigSuitcasesEl.addEventListener("change", () => { updateNotesSuggestion(); saveToStorage(); });
    carryOnEl.addEventListener("change", () => { updateNotesSuggestion(); saveToStorage(); });

    invoiceEl.addEventListener("change", () => { updateNotesSuggestion(); saveToStorage(); });
    nameEl.addEventListener("input", () => saveToStorage());
    phoneEl.addEventListener("input", () => saveToStorage());
    notesEl.addEventListener("input", () => saveToStorage());

    // form submit
    document.getElementById("quoteForm").addEventListener("submit", (e) => {
      e.preventDefault();
      hideFormAlert();

      const missing = [];

      if (!vehicleSelect.value) missing.push(LANG === "en" ? "Vehicle" : "Veicolo");
      if (!fromEl.value.trim()) missing.push(LANG === "en" ? "Pickup" : "Partenza");
      if (!toEl.value.trim()) missing.push(LANG === "en" ? "Drop-off" : "Destinazione");
      if (!whenEl.value) missing.push(LANG === "en" ? "Date/Time" : "Data/Ora");
      if (!paxSelect.value) missing.push(LANG === "en" ? "Passengers" : "Passeggeri");

      if (serviceNeedsHours() && !hoursEl.value) missing.push(LANG === "en" ? "Hours" : "Ore");

      if (missing.length) {
        showFormAlert(missing);
        scrollToQuoteAndFocus();
        return;
      }

      saveToStorage();

      const isUrgent = !urgentTopBar.classList.contains("hidden");
      openWhatsAppWithText(buildFormWhatsAppMessage(isUrgent, ""));
    });

    // reset
    document.getElementById("resetBtn").addEventListener("click", () => {
      document.getElementById("quoteForm").reset();
      hideFormAlert();

      clearFleetSelection();
      updateSelectedVehicleUI();

      setContactPref("WhatsApp");
      setLuggage("none");
      setMeetGreet("no");
      setPayment("card");

      // default datetimes
      setMinDateTimeNow(whenEl);
      whenEl.value = "";
      setDefaultDateTimePlus60(whenEl);

      // clear conditionals
      returnTbdEl.checked = false;
      returnWhenEl.value = "";
      hoursEl.value = "";
      flightNumberEl.value = "";
      bigSuitcasesEl.value = "0";
      carryOnEl.value = "0";

      // hide hints
      capacityNotice.classList.add("hidden");
      urgentHint.classList.add("hidden");
      urgentTopBar.classList.add("hidden");
      travelHint.classList.add("hidden");
      flightWrap.classList.add("hidden");
      meetWrap.classList.add("hidden");
      arHint.classList.add("hidden");
      luggageVanHint.classList.add("hidden");
      returnWrap.classList.add("hidden");
      hoursWrap.classList.add("hidden");

      // remove storage
      try { localStorage.removeItem(STORAGE_KEY); } catch(e) {}

      updateNotesSuggestion();
      updateContextHints();
      updateServiceConditionalFields();
    });

    // init
    document.getElementById("t_privacy").textContent = "Privacy Policy";
    document.getElementById("t_cookie").textContent = "Cookie Policy";

    setMinDateTimeNow(whenEl);
    setDefaultDateTimePlus60(whenEl);
    setMinDateTimeNow(returnWhenEl);

    // restore state first
    restoreFromStorage();

    // apply language after restore
    setLanguage(LANG);

    // keep conditional fields updated
    updateServiceConditionalFields();
    updateSelectedVehicleUI();
    enforceCapacityRule();
    updateNotesSuggestion();
    updateContextHints();

    // also: urgent quick message (top bar uses base urgent template)
    urgentTopWA.addEventListener("click", () => openWhatsAppWithText(getBaseWhatsAppMessage(true, "")));
  </script>
</body>
</html>
