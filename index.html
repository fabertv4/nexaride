<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>NexaRide — NCC e trasferimenti privati 24/7</title>
  <meta name="description" content="NCC e trasferimenti privati a Milano e Lombardia. Aeroporti, città, lunghi viaggi, gruppi. Risposta immediata su WhatsApp." />
  <meta name="robots" content="index,follow,max-image-preview:large" />
  <link rel="canonical" href="https://www.nexaride.it/" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="NexaRide" />
  <meta property="og:title" content="NexaRide — NCC e trasferimenti privati 24/7" />
  <meta property="og:description" content="NCC e trasferimenti privati a Milano e Lombardia. Aeroporti, città, lunghi viaggi, gruppi. Risposta immediata su WhatsApp." />
  <meta property="og:url" content="https://www.nexaride.it/" />
  <!-- opzionale: se aggiungi un'immagine reale, sblocca questa riga -->
  <!-- <meta property="og:image" content="https://www.nexaride.it/og.jpg" /> -->

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="NexaRide — NCC e trasferimenti privati 24/7" />
  <meta name="twitter:description" content="NCC e trasferimenti privati a Milano e Lombardia. Aeroporti, città, lunghi viaggi, gruppi. Risposta immediata su WhatsApp." />

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- JSON-LD (minimo, utile per brand + SERP) -->
  <script type="application/ld+json" id="jsonld">
  {
    "@context":"https://schema.org",
    "@type":"LocalBusiness",
    "name":"NexaRide",
    "url":"https://www.nexaride.it/",
    "telephone":"+39 320 878 4091",
    "email":"info@nexaride.it",
    "areaServed":[{"@type":"AdministrativeArea","name":"Milano"},{"@type":"AdministrativeArea","name":"Lombardia"}],
    "serviceType":"NCC / Chauffeur / Private Transfers",
    "sameAs":[]
  }
  </script>

  <style>
    :root { color-scheme: dark; }
    html { scroll-behavior: smooth; }
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    section[id] { scroll-margin-top: 90px; }

    .hero-overlay { pointer-events: none; }

    .fleet-card { position: relative; }
    .fleet-badge {
      position: absolute; top: 14px; right: 14px;
      display: none; align-items: center; gap: 8px;
      padding: 8px 10px; border-radius: 999px;
      background: rgba(0,0,0,0.55);
      border: 1px solid rgba(255,255,255,0.16);
      backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
      font-size: 12px; color: #fff; user-select: none; z-index: 5;
    }
    .fleet-badge .dot {
      width: 18px; height: 18px; border-radius: 999px;
      background: #25D366; display: grid; place-items: center;
      color: #0b1a10; font-weight: 800; line-height: 1;
    }
    .fleet-card.is-selected { outline: 2px solid rgba(255,255,255,0.9); outline-offset: 0px; }
    .fleet-card.is-selected .fleet-badge { display: inline-flex; }

    .seg-wrap { display: flex; gap: 8px; flex-wrap: wrap; }
    .seg {
      cursor: pointer;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04);
      padding: 10px 12px;
      border-radius: 16px;
      font-weight: 600;
      font-size: 14px;
      color: rgba(255,255,255,0.9);
      user-select: none;
      transition: background .15s ease, border-color .15s ease, transform .05s ease;
    }
    .seg:hover { background: rgba(255,255,255,0.07); border-color: rgba(255,255,255,0.18); }
    .seg:active { transform: translateY(1px); }
    .seg[aria-pressed="true"] { background: rgba(37,211,102,0.14); border-color: rgba(37,211,102,0.55); }

    .stickybar {
      position: fixed; left: 0; right: 0; bottom: 0; z-index: 60;
      padding: 10px 12px;
      background: rgba(10,10,10,0.72);
      border-top: 1px solid rgba(255,255,255,0.10);
      backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    }

    .lang-btn {
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04);
      padding: 8px 10px;
      border-radius: 14px;
      font-weight: 700;
      font-size: 12px;
      color: rgba(255,255,255,0.9);
    }
    .lang-btn.is-active {
      background: rgba(37,211,102,0.14);
      border-color: rgba(37,211,102,0.55);
    }
  </style>
</head>

<body class="bg-neutral-950 text-neutral-100 pb-24 md:pb-0">
  <!-- HEADER -->
  <header class="sticky top-0 z-50 border-b border-white/10 bg-neutral-950/70 backdrop-blur">
    <div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-3">
      <a href="#top" class="flex items-center gap-3">
        <div class="h-9 w-9 rounded-xl bg-white/10 ring-1 ring-white/10 grid place-items-center font-bold">NR</div>
        <div class="leading-tight">
          <div class="font-semibold">NexaRide</div>
          <div id="t_header_sub" class="text-xs text-neutral-400">NCC • Milano • Transfer</div>
        </div>
      </a>

      <nav class="hidden items-center gap-6 text-sm text-neutral-300 md:flex">
        <a href="#fleet" class="hover:text-white" id="t_nav_fleet">Flotta</a>
        <a href="#why" class="hover:text-white" id="t_nav_why">Perché NexaRide</a>
        <a href="#quote" class="hover:text-white" id="t_nav_quote">Preventivo</a>
        <a href="#faq" class="hover:text-white" id="t_nav_faq">FAQ</a>
      </nav>

      <div class="flex items-center gap-2">
        <div class="flex items-center gap-2">
          <button id="langIT" type="button" class="lang-btn is-active">IT</button>
          <button id="langEN" type="button" class="lang-btn">EN</button>
        </div>

        <button id="ctaWATop" type="button"
          class="hidden md:inline-flex items-center gap-2 rounded-2xl bg-[#25D366] px-5 py-3 text-sm font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
          <span id="t_btn_wa_top">WhatsApp 24/7</span>
        </button>
      </div>
    </div>
  </header>

  <main id="top">
    <!-- HERO -->
    <section class="relative overflow-hidden">
      <div class="absolute inset-0 hero-overlay">
        <div class="absolute -top-24 -left-24 h-72 w-72 rounded-full bg-[#25D366]/20 blur-3xl"></div>
        <div class="absolute -bottom-24 -right-24 h-72 w-72 rounded-full bg-sky-500/10 blur-3xl"></div>
      </div>

      <div class="mx-auto grid max-w-6xl grid-cols-1 gap-10 px-4 py-12 md:grid-cols-2 md:py-16">
        <div>
          <div class="flex flex-wrap gap-2">
            <span class="rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-neutral-200" id="t_badge_1">Disponibili 24/7</span>
            <span class="rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-neutral-200" id="t_badge_2">Risposta rapida</span>
          </div>

          <h1 id="t_h1" class="mt-5 text-4xl font-semibold leading-tight md:text-5xl">
            NCC e trasferimenti privati – disponibili 24/7
          </h1>

          <p id="t_sub" class="mt-4 whitespace-pre-line text-lg text-neutral-300">
            Aeroporti · città · lunghi viaggi · gruppi
            Rispondiamo subito su WhatsApp
          </p>

          <!-- micro trust + b2b soft proof -->
          <div id="t_microtrust" class="mt-3 text-xs text-neutral-400">
            Preventivo immediato · Senza app · Persona reale
          </div>
          <div id="t_b2b_soft" class="mt-2 text-xs text-neutral-400">
            Business · hotel · eventi · clienti internazionali (risposta rapida in chat)
          </div>

          <div class="mt-7 flex flex-col gap-3 sm:flex-row">
            <button id="ctaWAHero" type="button"
              class="inline-flex items-center justify-center rounded-2xl bg-[#25D366] px-6 py-4 font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
              <span id="t_btn_wa_hero">Scrivici ora su WhatsApp</span>
            </button>

            <button id="ctaScrollToForm" type="button"
              class="inline-flex items-center justify-center rounded-2xl border border-white/10 bg-white/5 px-6 py-4 font-semibold hover:bg-white/10 active:bg-white/15">
              <span id="t_btn_fill_details">Facoltativo: dettagli corsa</span>
            </button>
          </div>

          <div class="mt-7 text-sm text-neutral-400">
            WhatsApp: <span class="text-white font-semibold">+39 320 878 4091</span> •
            <span id="t_email_label">Email</span>:
            <a class="underline hover:text-white" href="mailto:info@nexaride.it">info@nexaride.it</a>
          </div>
        </div>

        <div class="relative">
          <div class="rounded-[2rem] border border-white/10 bg-white/5 p-7 shadow-2xl shadow-black/50">
            <div class="flex items-start justify-between gap-4">
              <div>
                <div id="t_card_small" class="text-sm text-neutral-300">Come funziona</div>
                <div id="t_card_title" class="mt-1 text-xl font-semibold">Aeroporti • Lavoro • Eventi</div>
              </div>
              <div class="rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-neutral-200">
                <span id="t_card_area">Milano & Lombardia</span>
              </div>
            </div>

            <div class="mt-6 grid gap-4">
              <div class="rounded-3xl border border-white/10 bg-neutral-950/40 p-5">
                <div id="t_card_1_t" class="text-white font-semibold">1) Scrivi su WhatsApp</div>
                <div id="t_card_1_d" class="mt-1 text-neutral-300">Partenza, destinazione, data/ora, passeggeri</div>
              </div>
              <div class="rounded-3xl border border-white/10 bg-neutral-950/40 p-5">
                <div id="t_card_2_t" class="text-white font-semibold">2) Ricevi il preventivo</div>
                <div id="t_card_2_d" class="mt-1 text-neutral-300">Risposta rapida, persona reale</div>
              </div>
              <div class="rounded-3xl border border-white/10 bg-neutral-950/40 p-5">
                <div id="t_card_3_t" class="text-white font-semibold">3) Conferma e viaggio</div>
                <div id="t_card_3_d" class="mt-1 text-neutral-300">Puntualità, comfort, discrezione</div>
              </div>
            </div>

            <p id="t_card_note" class="mt-5 text-sm text-neutral-300">Preventivo gratuito, nessun impegno.</p>

            <div class="mt-6 flex flex-wrap gap-3">
              <a href="tel:+393208784091"
                 class="inline-flex items-center justify-center rounded-2xl border border-white/10 bg-white/5 px-5 py-3 font-semibold hover:bg-white/10">
                <span id="t_btn_call">Chiama</span>
              </a>

              <button id="ctaWAOpenGeneric" type="button"
                class="inline-flex items-center justify-center rounded-2xl bg-[#25D366] px-5 py-3 font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
                <span id="t_btn_open_wa">Apri WhatsApp</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- WHY -->
    <section id="why" class="border-t border-white/10 bg-white/5">
      <div class="mx-auto max-w-6xl px-4 py-12">
        <h2 id="t_why_title" class="text-3xl font-semibold">Perché NexaRide</h2>
        <div class="mt-8 grid gap-4 md:grid-cols-3">
          <div class="rounded-3xl border border-white/10 bg-neutral-950/40 p-6">
            <div class="text-sm text-neutral-400" id="t_why_s1">Punto 1</div>
            <div class="mt-1 text-lg font-semibold" id="t_why_t1">NCC professionale</div>
            <p class="mt-2 text-neutral-300" id="t_why_d1">Flotta operativa e partner NCC per più veicoli.</p>
          </div>
          <div class="rounded-3xl border border-white/10 bg-neutral-950/40 p-6">
            <div class="text-sm text-neutral-400" id="t_why_s2">Punto 2</div>
            <div class="mt-1 text-lg font-semibold" id="t_why_t2">Risposta rapida</div>
            <p class="mt-2 text-neutral-300" id="t_why_d2">Gestione diretta su WhatsApp, senza call center.</p>
          </div>
          <div class="rounded-3xl border border-white/10 bg-neutral-950/40 p-6">
            <div class="text-sm text-neutral-400" id="t_why_s3">Punto 3</div>
            <div class="mt-1 text-lg font-semibold" id="t_why_t3">Comfort e puntualità</div>
            <p class="mt-2 text-neutral-300" id="t_why_d3">Servizio curato, privacy e affidabilità.</p>
          </div>
        </div>

        <div class="mt-10 flex justify-center">
          <button id="ctaWhy" type="button"
            class="inline-flex items-center justify-center rounded-2xl bg-[#25D366] px-6 py-3 font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
            <span id="t_btn_why">Contattaci su WhatsApp</span>
          </button>
        </div>
      </div>
    </section>

    <!-- FLEET -->
    <section id="fleet" class="mx-auto max-w-6xl px-4 py-16">
      <h2 id="t_fleet_title" class="text-3xl font-semibold">Categorie veicoli</h2>
      <p id="t_fleet_sub" class="mt-3 text-neutral-300 max-w-2xl">
        Seleziona una categoria: precompiliamo il form. Se vuoi un VAN anche in 1–2 passeggeri, puoi sceglierlo.
      </p>

      <div class="mt-10 grid gap-6 md:grid-cols-3">
        <div data-vehicle-label="Comfort / SUV (Toyota RAV4)"
          class="fleet-card rounded-3xl border border-white/10 bg-white/5 overflow-hidden transition hover:scale-[1.01] hover:border-white/20">
          <div class="fleet-badge"><span class="dot">✓</span> <span id="t_selected_badge1">Selezionato</span></div>
          <img src="/rav4_industriale.png" alt="Toyota RAV4" class="w-full h-48 object-cover">
          <div class="p-6">
            <h3 id="t_fleet_c1_t" class="text-xl font-semibold">Comfort / SUV</h3>
            <p id="t_fleet_c1_d" class="mt-2 text-neutral-300">Toyota RAV4 · ideale fino a 4 passeggeri.</p>
          </div>
        </div>

        <div data-vehicle-label="Executive (Mercedes Classe E)"
          class="fleet-card rounded-3xl border border-white/10 bg-white/5 overflow-hidden transition hover:scale-[1.01] hover:border-white/20">
          <div class="fleet-badge"><span class="dot">✓</span> <span id="t_selected_badge2">Selezionato</span></div>
          <img src="/classeE_industriale.png" alt="Mercedes Classe E" class="w-full h-48 object-cover">
          <div class="p-6">
            <h3 id="t_fleet_c2_t" class="text-xl font-semibold">Executive</h3>
            <p id="t_fleet_c2_d" class="mt-2 text-neutral-300">Mercedes Classe E · business e VIP.</p>
          </div>
        </div>

        <div data-vehicle-label="Van / Gruppi (Mercedes Classe V / Vito)"
          class="fleet-card rounded-3xl border border-white/10 bg-white/5 overflow-hidden transition hover:scale-[1.01] hover:border-white/20">
          <div class="fleet-badge"><span class="dot">✓</span> <span id="t_selected_badge3">Selezionato</span></div>
          <img src="/classeV_industriale.png" alt="Mercedes Classe V / Vito" class="w-full h-48 object-cover">
          <div class="p-6">
            <h3 id="t_fleet_c3_t" class="text-xl font-semibold">Van / Gruppi</h3>
            <p id="t_fleet_c3_d" class="mt-2 text-neutral-300">Classe V / Vito · fino a 7 passeggeri + bagagli.</p>
          </div>
        </div>
      </div>

      <div class="mt-10 flex justify-center">
        <button id="ctaFleetToForm" type="button"
          class="inline-flex items-center justify-center rounded-2xl bg-white px-8 py-4 text-lg font-semibold text-neutral-950 hover:bg-neutral-200 active:bg-neutral-300">
          <span id="t_btn_fleet_quote">Richiedi preventivo</span>
        </button>
      </div>

      <p id="t_fleet_hint" class="mt-3 text-center text-xs text-neutral-400">
        Seleziona un veicolo per precompilare il form.
      </p>
    </section>

    <!-- QUOTE -->
    <section id="quote" class="mx-auto max-w-6xl px-4 py-12">
      <div class="rounded-[2rem] border border-white/10 bg-white/5 p-8">
        <div class="flex flex-col gap-6 md:flex-row md:items-end md:justify-between">
          <div>
            <h2 id="t_quote_title" class="text-3xl font-semibold">Richiedi preventivo</h2>
            <p id="t_quote_sub" class="mt-2 text-neutral-300">Compila i dettagli e invia su WhatsApp in 1 click.</p>

            <div id="selectedVehicleWrap" class="mt-3 hidden">
              <span class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2 text-sm text-neutral-200">
                <span class="h-2 w-2 rounded-full bg-[#25D366]"></span>
                <span id="t_selected_label">Veicolo selezionato</span>:
                <span id="selectedVehicleLabel" class="font-semibold text-white"></span>
              </span>
            </div>

            <div class="mt-4 text-sm text-neutral-300">
              WhatsApp: <span class="text-white font-semibold">+39 320 878 4091</span> •
              <span id="t_email_label2">Email</span>:
              <a class="underline hover:text-white" href="mailto:info@nexaride.it">info@nexaride.it</a>
            </div>

            <div id="t_quote_micro" class="mt-2 text-xs text-neutral-400">
              Preventivo gratuito · Risposta tipica: <span class="text-neutral-200 font-semibold">2–5 min</span>
            </div>
          </div>

          <div class="flex flex-wrap gap-3">
            <a href="tel:+393208784091"
              class="inline-flex items-center justify-center rounded-2xl border border-white/10 bg-white/5 px-5 py-3 font-semibold hover:bg-white/10">
              <span id="t_btn_call2">Chiama</span>
            </a>

            <button id="ctaWAOpenGeneric2" type="button"
              class="inline-flex items-center justify-center rounded-2xl bg-[#25D366] px-5 py-3 font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
              <span id="t_btn_open_wa2">Apri WhatsApp</span>
            </button>
          </div>
        </div>

        <div id="formAlert" class="mt-6 hidden rounded-2xl border border-red-500/30 bg-red-500/10 px-5 py-4 text-sm text-red-100">
          <div class="font-semibold" id="t_form_alert_title">Compila i campi obbligatori</div>
          <div id="formAlertText" class="mt-1 text-red-100/90"></div>
        </div>

        <form id="quoteForm" class="mt-8 grid grid-cols-1 gap-4 md:grid-cols-4">
          <div class="md:col-span-4">
            <label class="text-sm text-neutral-300" id="t_contact_pref">Preferenza contatto</label>
            <div class="mt-2 seg-wrap">
              <button type="button" class="seg" id="prefWA" aria-pressed="true">WhatsApp</button>
              <button type="button" class="seg" id="prefCall" aria-pressed="false">Chiamata</button>
            </div>
            <p class="mt-2 text-xs text-neutral-400" id="t_contact_pref_hint">
              Se scegli “Chiamata”, ti richiamiamo appena possibile.
            </p>
          </div>

          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_vehicle_label">Categoria veicolo *</label>
            <select id="vehicle" required
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100">
              <option value="" disabled selected id="t_vehicle_placeholder">Seleziona categoria veicolo</option>
              <option value="Comfort / SUV (Toyota RAV4)">Comfort / SUV (Toyota RAV4)</option>
              <option value="Executive (Mercedes Classe E)">Executive (Mercedes Classe E)</option>
              <option value="Van / Gruppi (Mercedes Classe V / Vito)">Van / Gruppi (Mercedes Classe V / Vito)</option>
            </select>
            <p class="mt-2 text-xs text-neutral-400" id="t_vehicle_hint">Puoi scegliere il Van anche per 1–2 passeggeri se lo preferisci.</p>
          </div>

          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_service_label">Tipo servizio</label>
            <select id="serviceType"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100">
              <option value="Solo andata" id="t_service_1">Solo andata</option>
              <option value="A disposizione (ore)" id="t_service_2">A disposizione (ore)</option>
              <option value="Andata/Ritorno" id="t_service_3">Andata/Ritorno</option>
              <option value="Intera giornata" id="t_service_4">Intera giornata</option>
            </select>

            <div id="arHint" class="mt-2 hidden rounded-2xl border border-sky-500/25 bg-sky-500/10 px-4 py-3 text-xs text-sky-100">
              <span id="t_ar_hint">Se l’orario di ritorno è incerto, scrivi “da definire” nelle Note.</span>
            </div>
          </div>

          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_from_label">Partenza *</label>
            <input id="from" required
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100 placeholder:text-neutral-500"
              placeholder="Es. Milano centro" />
          </div>

          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_to_label">Destinazione *</label>
            <input id="to" required
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100 placeholder:text-neutral-500"
              placeholder="Es. MXP Malpensa" />
          </div>

          <div id="travelHint" class="md:col-span-4 hidden rounded-2xl border border-emerald-500/25 bg-emerald-500/10 px-4 py-3 text-xs text-emerald-100">
            <span id="t_travel_hint">
              Se è aeroporto/stazione, inserisci numero volo/treno nelle Note (se disponibile) per velocizzare la conferma.
            </span>
          </div>

          <div class="md:col-span-4">
            <label class="text-sm text-neutral-300" id="t_stops_label">Fermate (opzionale)</label>
            <input id="stops"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100 placeholder:text-neutral-500"
              placeholder="Es. Stazione → Hotel → Ufficio" />
            <p class="mt-2 text-xs text-neutral-400" id="t_stops_hint">Scrivi le fermate in ordine.</p>
          </div>

          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_when_label">Data / Ora *</label>
            <input id="when" required type="datetime-local"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100" />

            <div id="urgentHint" class="mt-2 hidden rounded-2xl border border-rose-500/25 bg-rose-500/10 px-4 py-3 text-xs text-rose-100">
              <div id="t_urgent_hint">Se è entro 2 ore, scrivici direttamente su WhatsApp.</div>
              <div class="mt-2">
                <button type="button" id="urgentWA"
                  class="inline-flex items-center justify-center rounded-2xl bg-[#25D366] px-4 py-2 font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
                  <span id="t_urgent_btn">WhatsApp urgente</span>
                </button>
              </div>
            </div>
          </div>

          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_pax_label">Passeggeri *</label>
            <select id="pax" required
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100">
              <option value="" disabled selected id="t_pax_placeholder">Seleziona</option>
              <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
              <option value="5">5</option><option value="6">6</option><option value="7">7</option>
              <option value="8+">8+</option>
            </select>

            <div id="capacityNotice" class="mt-2 hidden rounded-2xl border border-amber-500/30 bg-amber-500/10 px-4 py-3 text-xs text-amber-100">
              <span id="t_capacity_notice">Per 5+ passeggeri selezioniamo automaticamente Van / Gruppi.</span>
            </div>

            <div id="paxPlusNotice" class="mt-2 hidden rounded-2xl border border-amber-500/30 bg-amber-500/10 px-4 py-3 text-xs text-amber-100">
              <span id="t_pax_plus_notice">Per 8+ passeggeri: scrivici su WhatsApp (organizziamo più veicoli).</span>
            </div>
          </div>

          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_luggage_label">Bagagli (consigliato)</label>
            <div class="mt-2 seg-wrap">
              <button type="button" class="seg" id="lugNone" aria-pressed="true"><span id="t_lug_none">Nessuno</span></button>
              <button type="button" class="seg" id="lugSome" aria-pressed="false"><span id="t_lug_some">1–2 valigie</span></button>
              <button type="button" class="seg" id="lugMany" aria-pressed="false"><span id="t_lug_many">Molti bagagli</span></button>
            </div>

            <div id="luggageVanHint" class="mt-2 hidden rounded-2xl border border-amber-500/25 bg-amber-500/10 px-4 py-3 text-xs text-amber-100">
              <span id="t_luggage_van_hint">Con 4 passeggeri e molti bagagli, spesso è meglio un Van (più spazio).</span>
            </div>
          </div>

          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_invoice_label">Fattura</label>
            <div class="mt-2 rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3">
              <label class="flex items-center gap-3 text-sm text-neutral-200 cursor-pointer select-none">
                <input id="invoice" type="checkbox" class="h-5 w-5 accent-[#25D366]" />
                <span id="t_invoice_check">Richiedo fattura</span>
              </label>
              <p class="mt-2 text-xs text-neutral-400" id="t_invoice_hint">Se selezionato, chiediamo i dati in chat.</p>
              <p class="mt-1 text-xs text-neutral-500" id="t_invoice_hint2">Fattura elettronica: dati richiesti in chat.</p>
            </div>
          </div>

          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_name_label">Nome</label>
            <input id="name"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100 placeholder:text-neutral-500"
              placeholder="Es. Marco" />
          </div>

          <div class="md:col-span-2">
            <label class="text-sm text-neutral-300" id="t_phone_label">Telefono (consigliato)</label>
            <input id="phoneInput" inputmode="tel"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100 placeholder:text-neutral-500"
              placeholder="Es. +39 3xx xxx xxxx" />
          </div>

          <div class="md:col-span-4">
            <label class="text-sm text-neutral-300" id="t_notes_label">Note</label>
            <textarea id="notes" rows="4"
              class="mt-1 w-full rounded-2xl border border-white/10 bg-neutral-950/40 px-4 py-3 text-neutral-100 placeholder:text-neutral-500"
              placeholder=""></textarea>
            <p class="mt-2 text-xs text-neutral-400" id="notesHint"></p>
          </div>

          <div class="md:col-span-4 flex flex-wrap gap-3">
            <button type="submit" id="submitBtn"
              class="inline-flex items-center justify-center rounded-2xl bg-[#25D366] px-6 py-3 font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
              <span id="t_submit">Invia su WhatsApp</span>
            </button>

            <button type="button" id="resetBtn"
              class="inline-flex items-center justify-center rounded-2xl border border-white/10 bg-white/5 px-6 py-3 font-semibold hover:bg-white/10">
              <span id="t_reset">Reset</span>
            </button>
          </div>
        </form>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="mx-auto max-w-6xl px-4 py-12">
      <h2 id="t_faq_title" class="text-3xl font-semibold">FAQ</h2>
      <div class="mt-8 grid gap-4 md:grid-cols-2">
        <details class="rounded-3xl border border-white/10 bg-white/5 p-6">
          <summary class="cursor-pointer font-semibold" id="t_faq_q1">Quanto prima devo prenotare?</summary>
          <p class="mt-3 text-neutral-200" id="t_faq_a1">Prima possibile. Per urgenze, scrivici su WhatsApp e verifichiamo subito.</p>
        </details>
        <details class="rounded-3xl border border-white/10 bg-white/5 p-6">
          <summary class="cursor-pointer font-semibold" id="t_faq_q2">Accettate pagamenti con carta?</summary>
          <p class="mt-3 text-neutral-200" id="t_faq_a2">Sì. Carta/contanti/bonifico: confermiamo in fase di prenotazione.</p>
        </details>
      </div>
    </section>
  </main>

  <footer class="border-t border-white/10 bg-neutral-950">
    <div class="mx-auto max-w-6xl px-4 py-10">
      <div class="flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
        <div>
          <div class="font-semibold">NexaRide</div>
          <div class="mt-2 text-sm text-neutral-400">
            WhatsApp: +39 320 878 4091 • Email: <a class="underline hover:text-white" href="mailto:info@nexaride.it">info@nexaride.it</a>
          </div>
          <div class="mt-2 text-xs text-neutral-500">© <span id="y"></span> NexaRide.</div>
        </div>

        <div class="flex flex-wrap gap-3 text-sm">
          <button id="ctaWAFooter" type="button"
            class="rounded-2xl bg-[#25D366] px-4 py-2 font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
            <span id="t_footer_wa">WhatsApp</span>
          </button>
          <a class="rounded-2xl border border-white/10 bg-white/5 px-4 py-2 font-semibold hover:bg-white/10"
             href="tel:+393208784091"><span id="t_footer_call">Chiama</span></a>
          <button id="ctaFooterToForm" type="button"
            class="rounded-2xl border border-white/10 bg-white/5 px-4 py-2 font-semibold hover:bg-white/10">
            <span id="t_footer_quote">Preventivo</span>
          </button>
        </div>
      </div>
    </div>
  </footer>

  <!-- STICKY MOBILE (WhatsApp dominante) -->
  <div class="stickybar md:hidden">
    <div class="mx-auto max-w-6xl flex gap-2 px-2">
      <button id="stickyWA" type="button"
        class="flex-[2] inline-flex items-center justify-center rounded-2xl bg-[#25D366] px-4 py-3 text-sm font-semibold text-neutral-950 hover:opacity-90 active:opacity-80">
        <span id="t_sticky_wa">WhatsApp</span>
      </button>
      <button id="stickyQuote" type="button"
        class="flex-1 inline-flex items-center justify-center rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm font-semibold hover:bg-white/10 active:bg-white/15">
        <span id="t_sticky_quote">Preventivo</span>
      </button>
    </div>
  </div>

  <script>
    // ---------- CONFIG ----------
    const WA_PHONE = "393208784091";
    const VAN_LABEL = "Van / Gruppi (Mercedes Classe V / Vito)";
    const CANONICAL_URL = "https://www.nexaride.it/";

    // ---------- Tiny tracking (no vendor lock) ----------
    function track(eventName, payload = {}) {
      try {
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({ event: eventName, ...payload });
      } catch (_) {}
    }

    // ---------- I18N ----------
    const I18N = {
      it: {
        metaTitle: "NexaRide — NCC e trasferimenti privati 24/7",
        metaDesc: "NCC e trasferimenti privati a Milano e Lombardia. Aeroporti, città, lunghi viaggi, gruppi. Risposta immediata su WhatsApp.",
        headerSub: "NCC • Milano • Transfer",
        nav: { fleet:"Flotta", why:"Perché NexaRide", quote:"Preventivo", faq:"FAQ" },
        badges: { b1:"Disponibili 24/7", b2:"Risposta rapida" },
        h1: "NCC e trasferimenti privati – disponibili 24/7",
        sub: "Aeroporti · città · lunghi viaggi · gruppi\nRispondiamo subito su WhatsApp",
        microtrust: "Preventivo immediato · Senza app · Persona reale",
        b2bsoft: "Business · hotel · eventi · clienti internazionali (risposta rapida in chat)",
        btn: {
          waTop: "WhatsApp 24/7",
          waHero: "Scrivici ora su WhatsApp",
          fill: "Facoltativo: dettagli corsa",
          openWa: "Apri WhatsApp",
          call: "Chiama",
          fleetQuote: "Richiedi preventivo",
          urgent: "WhatsApp urgente",
          submit: "Invia su WhatsApp",
          reset: "Reset",
          footerQuote: "Preventivo"
        },
        card: {
          small: "Come funziona",
          title: "Aeroporti • Lavoro • Eventi",
          area: "Milano & Lombardia",
          n1t:"1) Scrivi su WhatsApp",
          n1d:"Partenza, destinazione, data/ora, passeggeri",
          n2t:"2) Ricevi il preventivo",
          n2d:"Risposta rapida, persona reale",
          n3t:"3) Conferma e viaggio",
          n3d:"Puntualità, comfort, discrezione",
          note:"Preventivo gratuito, nessun impegno."
        },
        why: {
          title:"Perché NexaRide",
          s1:"Punto 1", t1:"NCC professionale", d1:"Flotta operativa e partner NCC per più veicoli.",
          s2:"Punto 2", t2:"Risposta rapida", d2:"Gestione diretta su WhatsApp, senza call center.",
          s3:"Punto 3", t3:"Comfort e puntualità", d3:"Servizio curato, privacy e affidabilità."
        },
        fleet: {
          title:"Categorie veicoli",
          sub:"Seleziona una categoria: precompiliamo il form. Se vuoi un VAN anche in 1–2 passeggeri, puoi sceglierlo.",
          c1t:"Comfort / SUV", c1d:"Toyota RAV4 · ideale fino a 4 passeggeri.",
          c2t:"Executive", c2d:"Mercedes Classe E · business e VIP.",
          c3t:"Van / Gruppi", c3d:"Classe V / Vito · fino a 7 passeggeri + bagagli.",
          hint:"Seleziona un veicolo per precompilare il form.",
          selected:"Selezionato"
        },
        quote: {
          title:"Richiedi preventivo",
          sub:"Compila i dettagli e invia su WhatsApp in 1 click.",
          micro:"Preventivo gratuito · Risposta tipica: 2–5 min",
          selectedLabel:"Veicolo selezionato",
          email:"Email",
          alertTitle:"Compila i campi obbligatori",
          contactPref:"Preferenza contatto",
          contactHint:"Se scegli “Chiamata”, ti richiamiamo appena possibile.",
          prefWA:"WhatsApp",
          prefCall:"Chiamata",
          vehicleLabel:"Categoria veicolo *",
          vehiclePlaceholder:"Seleziona categoria veicolo",
          vehicleHint:"Puoi scegliere il Van anche per 1–2 passeggeri se lo preferisci.",
          serviceLabel:"Tipo servizio",
          service1:"Solo andata",
          service2:"A disposizione (ore)",
          service3:"Andata/Ritorno",
          service4:"Intera giornata",
          arHint:"Se l’orario di ritorno è incerto, scrivi “da definire” nelle Note.",
          fromLabel:"Partenza *",
          toLabel:"Destinazione *",
          fromPh:"Es. Milano centro",
          toPh:"Es. MXP Malpensa",
          travelHint:"Se è aeroporto/stazione, inserisci numero volo/treno nelle Note (se disponibile) per velocizzare la conferma.",
          stopsLabel:"Fermate (opzionale)",
          stopsPh:"Es. Stazione → Hotel → Ufficio",
          stopsHint:"Scrivi le fermate in ordine.",
          whenLabel:"Data / Ora *",
          urgentHint:"Se è entro 2 ore, scrivici direttamente su WhatsApp.",
          paxLabel:"Passeggeri *",
          paxPh:"Seleziona",
          capacityNotice:"Per 5+ passeggeri selezioniamo automaticamente Van / Gruppi.",
          paxPlusNotice:"Per 8+ passeggeri: scrivici su WhatsApp (organizziamo più veicoli).",
          luggageLabel:"Bagagli (consigliato)",
          lugNone:"Nessuno",
          lugSome:"1–2 valigie",
          lugMany:"Molti bagagli",
          luggageVanHint:"Con 4 passeggeri e molti bagagli, spesso è meglio un Van (più spazio).",
          invoiceLabel:"Fattura",
          invoiceCheck:"Richiedo fattura",
          invoiceHint:"Se selezionato, chiediamo i dati in chat.",
          invoiceHint2:"Fattura elettronica: dati richiesti in chat.",
          nameLabel:"Nome",
          namePh:"Es. Marco",
          phoneLabel:"Telefono (consigliato)",
          phonePh:"Es. +39 3xx xxx xxxx",
          notesLabel:"Note"
        },
        faq: {
          title:"FAQ",
          q1:"Quanto prima devo prenotare?",
          a1:"Prima possibile. Per urgenze, scrivici su WhatsApp e verifichiamo subito.",
          q2:"Accettate pagamenti con carta?",
          a2:"Sì. Carta/contanti/bonifico: confermiamo in fase di prenotazione."
        },
        sticky: { wa:"WhatsApp", quote:"Preventivo" },
        waTemplates: {
          base:
`Ciao! Vorrei un preventivo NCC con NexaRide.

Partenza:
Destinazione:
Fermate (se presenti):
Data:
Ora:
Passeggeri:
Categoria veicolo (Comfort / Executive / Van):
Bagagli:
Note:`,
          formPrefix:"Ciao! Vorrei un preventivo NCC con NexaRide.\n"
        }
      },

      en: {
        metaTitle: "NexaRide — Chauffeur & Private Transfers 24/7",
        metaDesc: "Chauffeur service in Milan and Lombardy. Airports, city rides, long distance, groups. Fast WhatsApp reply.",
        headerSub: "Chauffeur • Milan • Transfers",
        nav: { fleet:"Fleet", why:"Why NexaRide", quote:"Quote", faq:"FAQ" },
        badges: { b1:"Available 24/7", b2:"Fast reply" },
        h1: "Chauffeur & private transfers – available 24/7",
        sub: "Airports · city · long distance · groups\nWe reply fast on WhatsApp",
        microtrust: "Instant quote · No app · Real person",
        b2bsoft: "Business · hotels · events · international clients (fast chat reply)",
        btn: {
          waTop: "WhatsApp 24/7",
          waHero: "Chat on WhatsApp",
          fill: "Optional: trip details",
          openWa: "Open WhatsApp",
          call: "Call",
          fleetQuote: "Get a quote",
          urgent: "Urgent WhatsApp",
          submit: "Send on WhatsApp",
          reset: "Reset",
          footerQuote: "Quote"
        },
        card: {
          small: "How it works",
          title: "Airports • Business • Events",
          area: "Milan & Lombardy",
          n1t:"1) Message us",
          n1d:"Pickup, drop-off, date/time, passengers",
          n2t:"2) Get a quote",
          n2d:"Fast reply, real person",
          n3t:"3) Confirm & ride",
          n3d:"Punctuality, comfort, discretion",
          note:"Free quote, no commitment."
        },
        why: {
          title:"Why NexaRide",
          s1:"Point 1", t1:"Professional service", d1:"Active fleet + NCC partners for multiple vehicles.",
          s2:"Point 2", t2:"Fast reply", d2:"Direct WhatsApp management, no call center.",
          s3:"Point 3", t3:"Comfort & punctuality", d3:"Premium service, privacy and reliability."
        },
        fleet: {
          title:"Vehicle categories",
          sub:"Select a category to prefill the form. You can choose a Van even for 1–2 passengers if you prefer more space.",
          c1t:"Comfort / SUV", c1d:"Toyota RAV4 · ideal up to 4 passengers.",
          c2t:"Executive", c2d:"Mercedes E-Class · business and VIP.",
          c3t:"Van / Groups", c3d:"V-Class / Vito · up to 7 passengers + luggage.",
          hint:"Select a vehicle to prefill the form.",
          selected:"Selected"
        },
        quote: {
          title:"Request a quote",
          sub:"Fill in the details and send on WhatsApp in 1 click.",
          micro:"Free quote · Typical reply: 2–5 min",
          selectedLabel:"Selected vehicle",
          email:"Email",
          alertTitle:"Please fill required fields",
          contactPref:"Contact preference",
          contactHint:"If you choose “Call”, we’ll call you back as soon as possible.",
          prefWA:"WhatsApp",
          prefCall:"Call",
          vehicleLabel:"Vehicle category *",
          vehiclePlaceholder:"Select vehicle category",
          vehicleHint:"You can choose a Van even for 1–2 passengers if you prefer.",
          serviceLabel:"Service type",
          service1:"One-way",
          service2:"Hourly (as directed)",
          service3:"Round trip",
          service4:"Full day",
          arHint:"If return time is uncertain, write “to be defined” in Notes.",
          fromLabel:"Pickup *",
          toLabel:"Drop-off *",
          fromPh:"e.g. Milan city center",
          toPh:"e.g. MXP Malpensa",
          travelHint:"If airport/station, add flight/train number in Notes (if available).",
          stopsLabel:"Stops (optional)",
          stopsPh:"e.g. Station → Hotel → Office",
          stopsHint:"Write stops in order.",
          whenLabel:"Date / Time *",
          urgentHint:"If within 2 hours, message us on WhatsApp.",
          paxLabel:"Passengers *",
          paxPh:"Select",
          capacityNotice:"For 5+ passengers we automatically select Van / Groups.",
          paxPlusNotice:"For 8+ passengers: message us on WhatsApp (we arrange multiple vehicles).",
          luggageLabel:"Luggage (recommended)",
          lugNone:"None",
          lugSome:"1–2 suitcases",
          lugMany:"Lots of luggage",
          luggageVanHint:"With 4 passengers and lots of luggage, a Van is often better (more space).",
          invoiceLabel:"Invoice",
          invoiceCheck:"I need an invoice",
          invoiceHint:"If selected, we’ll request details in chat.",
          invoiceHint2:"E-invoice: details requested in chat.",
          nameLabel:"Name",
          namePh:"e.g. Mark",
          phoneLabel:"Phone (recommended)",
          phonePh:"e.g. +39 …",
          notesLabel:"Notes"
        },
        faq: {
          title:"FAQ",
          q1:"How early should I book?",
          a1:"As early as possible. For urgent rides, message us on WhatsApp and we’ll check availability.",
          q2:"Do you accept card payments?",
          a2:"Yes. Card/cash/bank transfer: we confirm during booking."
        },
        sticky: { wa:"WhatsApp", quote:"Quote" },
        waTemplates: {
          base:
`Hi! I'd like a chauffeur quote with NexaRide.

Pickup:
Drop-off:
Stops (if any):
Date:
Time:
Passengers:
Vehicle (Comfort / Executive / Van):
Luggage:
Notes:`,
          formPrefix:"Hi! I'd like a chauffeur quote with NexaRide.\n"
        }
      }
    };

    // ---------- Helpers ----------
    function setMeta(name, value) {
      const el = document.querySelector(`meta[name="${name}"]`);
      if (el) el.setAttribute("content", value);
    }
    function setOg(property, value) {
      const el = document.querySelector(`meta[property="${property}"]`);
      if (el) el.setAttribute("content", value);
    }
    function setText(id, value) {
      const el = document.getElementById(id);
      if (!el) return;
      el.textContent = value;
    }
    function openWhatsAppWithText(text) {
      const url = `https://wa.me/${WA_PHONE}?text=${encodeURIComponent(text)}`;
      window.open(url, "_blank", "noopener,noreferrer");
    }
    function fmtDateTimeLocal(dt) {
      const pad = (n) => String(n).padStart(2, "0");
      return `${dt.getFullYear()}-${pad(dt.getMonth()+1)}-${pad(dt.getDate())}T${pad(dt.getHours())}:${pad(dt.getMinutes())}`;
    }
    function setMinDateTimeNow() {
      const now = new Date();
      whenEl.min = fmtDateTimeLocal(now);
    }
    function setDefaultDateTimePlus60() {
      const dt = new Date(Date.now() + 60 * 60 * 1000);
      whenEl.value = fmtDateTimeLocal(dt);
    }
    function isWithinHours(dateValue, hours) {
      if (!dateValue) return false;
      const dt = new Date(dateValue);
      const diff = dt.getTime() - Date.now();
      return diff <= (hours * 60 * 60 * 1000);
    }
    function isAirportOrStationText(text) {
      const t = (text || "").toLowerCase();
      const keys = [
        "mxp","malpensa","lin","linate","bgy","orio","orio al serio","airport","terminal","arrivals","departures",
        "stazione","station","train","centrale","garibaldi","cadorna","rogoredo","lambrate"
      ];
      return keys.some(k => t.includes(k));
    }

    // ---------- STATE ----------
    let LANG = (localStorage.getItem("nexaride_lang") || "it");
    let contactPref = "WhatsApp";
    let luggage = "none";

    // ---------- ELEMENTS ----------
    const langIT = document.getElementById("langIT");
    const langEN = document.getElementById("langEN");

    const vehicleSelect = document.getElementById("vehicle");
    const paxSelect = document.getElementById("pax");
    const whenEl = document.getElementById("when");
    const fromEl = document.getElementById("from");
    const toEl = document.getElementById("to");
    const stopsEl = document.getElementById("stops");
    const serviceTypeEl = document.getElementById("serviceType");
    const notesEl = document.getElementById("notes");
    const nameEl = document.getElementById("name");
    const phoneEl = document.getElementById("phoneInput");
    const invoiceEl = document.getElementById("invoice");

    const capacityNotice = document.getElementById("capacityNotice");
    const paxPlusNotice = document.getElementById("paxPlusNotice");
    const urgentHint = document.getElementById("urgentHint");
    const travelHint = document.getElementById("travelHint");
    const arHint = document.getElementById("arHint");
    const luggageVanHint = document.getElementById("luggageVanHint");

    const formAlert = document.getElementById("formAlert");
    const formAlertText = document.getElementById("formAlertText");

    const selectedVehicleWrap = document.getElementById("selectedVehicleWrap");
    const selectedVehicleLabel = document.getElementById("selectedVehicleLabel");

    const prefWA = document.getElementById("prefWA");
    const prefCall = document.getElementById("prefCall");

    const lugNone = document.getElementById("lugNone");
    const lugSome = document.getElementById("lugSome");
    const lugMany = document.getElementById("lugMany");

    const notesHintEl = document.getElementById("notesHint");
    const fleetCards = Array.from(document.querySelectorAll(".fleet-card"));

    // ---------- Lang apply ----------
    function applyLang() {
      const T = I18N[LANG];

      // lang + title/desc
      document.documentElement.lang = LANG;
      document.title = T.metaTitle;
      const md = document.querySelector('meta[name="description"]');
      if (md) md.setAttribute("content", T.metaDesc);

      // OG/Twitter
      setOg("og:title", T.metaTitle);
      setOg("og:description", T.metaDesc);
      setOg("og:url", CANONICAL_URL);
      setMeta("twitter:title", T.metaTitle);
      setMeta("twitter:description", T.metaDesc);

      // canonical
      const canonical = document.querySelector('link[rel="canonical"]');
      if (canonical) canonical.setAttribute("href", CANONICAL_URL);

      // active buttons
      langIT.classList.toggle("is-active", LANG === "it");
      langEN.classList.toggle("is-active", LANG === "en");

      // header/nav
      setText("t_header_sub", T.headerSub);
      setText("t_nav_fleet", T.nav.fleet);
      setText("t_nav_why", T.nav.why);
      setText("t_nav_quote", T.nav.quote);
      setText("t_nav_faq", T.nav.faq);

      // hero
      setText("t_badge_1", T.badges.b1);
      setText("t_badge_2", T.badges.b2);
      setText("t_h1", T.h1);
      setText("t_sub", T.sub);
      setText("t_microtrust", T.microtrust);
      setText("t_b2b_soft", T.b2bsoft);
      setText("t_btn_wa_top", T.btn.waTop);
      setText("t_btn_wa_hero", T.btn.waHero);
      setText("t_btn_fill_details", T.btn.fill);
      setText("t_btn_open_wa", T.btn.openWa);
      setText("t_btn_open_wa2", T.btn.openWa);
      setText("t_btn_call", T.btn.call);
      setText("t_btn_call2", T.btn.call);

      // card
      setText("t_card_small", T.card.small);
      setText("t_card_title", T.card.title);
      setText("t_card_area", T.card.area);
      setText("t_card_1_t", T.card.n1t);
      setText("t_card_1_d", T.card.n1d);
      setText("t_card_2_t", T.card.n2t);
      setText("t_card_2_d", T.card.n2d);
      setText("t_card_3_t", T.card.n3t);
      setText("t_card_3_d", T.card.n3d);
      setText("t_card_note", T.card.note);

      // why
      setText("t_why_title", T.why.title);
      setText("t_why_s1", T.why.s1); setText("t_why_t1", T.why.t1); setText("t_why_d1", T.why.d1);
      setText("t_why_s2", T.why.s2); setText("t_why_t2", T.why.t2); setText("t_why_d2", T.why.d2);
      setText("t_why_s3", T.why.s3); setText("t_why_t3", T.why.t3); setText("t_why_d3", T.why.d3);
      setText("t_btn_why", (LANG === "en" ? "Chat on WhatsApp" : "Contattaci su WhatsApp"));

      // fleet
      setText("t_fleet_title", T.fleet.title);
      setText("t_fleet_sub", T.fleet.sub);
      setText("t_fleet_c1_t", T.fleet.c1t);
      setText("t_fleet_c1_d", T.fleet.c1d);
      setText("t_fleet_c2_t", T.fleet.c2t);
      setText("t_fleet_c2_d", T.fleet.c2d);
      setText("t_fleet_c3_t", T.fleet.c3t);
      setText("t_fleet_c3_d", T.fleet.c3d);
      setText("t_fleet_hint", T.fleet.hint);
      setText("t_btn_fleet_quote", T.btn.fleetQuote);
      setText("t_selected_badge1", T.fleet.selected);
      setText("t_selected_badge2", T.fleet.selected);
      setText("t_selected_badge3", T.fleet.selected);

      // quote
      setText("t_quote_title", T.quote.title);
      setText("t_quote_sub", T.quote.sub);
      setText("t_quote_micro", T.quote.micro);
      setText("t_selected_label", T.quote.selectedLabel);
      setText("t_contact_pref", T.quote.contactPref);
      setText("t_contact_pref_hint", T.quote.contactHint);
      prefWA.textContent = T.quote.prefWA;
      prefCall.textContent = T.quote.prefCall;
      setText("t_vehicle_label", T.quote.vehicleLabel);
      setText("t_vehicle_placeholder", T.quote.vehiclePlaceholder);
      setText("t_vehicle_hint", T.quote.vehicleHint);
      setText("t_service_label", T.quote.serviceLabel);
      setText("t_service_1", T.quote.service1);
      setText("t_service_2", T.quote.service2);
      setText("t_service_3", T.quote.service3);
      setText("t_service_4", T.quote.service4);
      setText("t_ar_hint", T.quote.arHint);
      setText("t_from_label", T.quote.fromLabel);
      setText("t_to_label", T.quote.toLabel);
      fromEl.placeholder = T.quote.fromPh;
      toEl.placeholder = T.quote.toPh;
      setText("t_travel_hint", T.quote.travelHint);
      setText("t_stops_label", T.quote.stopsLabel);
      stopsEl.placeholder = T.quote.stopsPh;
      setText("t_stops_hint", T.quote.stopsHint);
      setText("t_when_label", T.quote.whenLabel);
      setText("t_urgent_hint", T.quote.urgentHint);
      setText("t_urgent_btn", T.btn.urgent);
      setText("t_pax_label", T.quote.paxLabel);
      setText("t_pax_placeholder", T.quote.paxPh);
      setText("t_capacity_notice", T.quote.capacityNotice);
      setText("t_pax_plus_notice", T.quote.paxPlusNotice);
      setText("t_luggage_label", T.quote.luggageLabel);
      setText("t_lug_none", T.quote.lugNone);
      setText("t_lug_some", T.quote.lugSome);
      setText("t_lug_many", T.quote.lugMany);
      setText("t_luggage_van_hint", T.quote.luggageVanHint);
      setText("t_invoice_label", T.quote.invoiceLabel);
      setText("t_invoice_check", T.quote.invoiceCheck);
      setText("t_invoice_hint", T.quote.invoiceHint);
      setText("t_invoice_hint2", T.quote.invoiceHint2);
      setText("t_name_label", T.quote.nameLabel);
      nameEl.placeholder = T.quote.namePh;
      setText("t_phone_label", T.quote.phoneLabel);
      phoneEl.placeholder = T.quote.phonePh;
      setText("t_notes_label", T.quote.notesLabel);

      setText("t_submit", T.btn.submit);
      setText("t_reset", T.btn.reset);
      setText("t_form_alert_title", T.quote.alertTitle);

      // faq
      setText("t_faq_title", T.faq.title);
      setText("t_faq_q1", T.faq.q1);
      setText("t_faq_a1", T.faq.a1);
      setText("t_faq_q2", T.faq.q2);
      setText("t_faq_a2", T.faq.a2);

      // sticky
      setText("t_sticky_wa", T.sticky.wa);
      setText("t_sticky_quote", T.sticky.quote);

      // footer
      setText("t_footer_wa", T.sticky.wa);
      setText("t_footer_call", T.btn.call);
      setText("t_footer_quote", T.btn.footerQuote);

      // small labels
      setText("t_email_label", (LANG === "en" ? "Email" : "Email"));
      setText("t_email_label2", (LANG === "en" ? "Email" : "Email"));
    }

    // ---------- UI helpers ----------
    function setContactPref(pref) {
      contactPref = pref;
      const isWA = pref.toLowerCase().includes("whatsapp");
      prefWA.setAttribute("aria-pressed", String(isWA));
      prefCall.setAttribute("aria-pressed", String(!isWA));
    }

    function setLuggage(v) {
      luggage = v;
      lugNone.setAttribute("aria-pressed", String(v === "none"));
      lugSome.setAttribute("aria-pressed", String(v === "some"));
      lugMany.setAttribute("aria-pressed", String(v === "many"));
      enforceCapacityRule();
      updateContextHints();
    }

    function clearFleetSelection() {
      fleetCards.forEach(c => c.classList.remove("is-selected"));
    }

    function selectFleetByLabel(label) {
      if (!label) return;
      clearFleetSelection();
      const found = fleetCards.find(c => (c.getAttribute("data-vehicle-label") || "") === label);
      if (found) found.classList.add("is-selected");
    }

    function updateSelectedVehicleUI() {
      if (vehicleSelect.value) {
        selectedVehicleLabel.textContent = vehicleSelect.value;
        selectedVehicleWrap.classList.remove("hidden");
      } else {
        selectedVehicleWrap.classList.add("hidden");
        selectedVehicleLabel.textContent = "";
      }
    }

    function scrollToQuoteAndFocus() {
      document.getElementById("quote").scrollIntoView({ behavior: "smooth", block: "start" });
      setTimeout(() => {
        const first = document.getElementById("vehicle");
        if (first) first.focus();
      }, 350);
    }

    // ---------- Rules / hints ----------
    function enforceCapacityRule() {
      const pax = String(paxSelect.value || "");
      const manyBags = (luggage === "many");
      const paxNum = parseInt(pax, 10);

      // reset notices
      capacityNotice.classList.add("hidden");
      paxPlusNotice.classList.add("hidden");

      // 8+ => force WA guidance + set Van
      if (pax === "8+") {
        paxPlusNotice.classList.remove("hidden");
        if (vehicleSelect.value !== VAN_LABEL) vehicleSelect.value = VAN_LABEL;
        selectFleetByLabel(VAN_LABEL);
        updateSelectedVehicleUI();
        return;
      }

      // 5+ => auto Van
      if (!Number.isNaN(paxNum) && paxNum >= 5) {
        capacityNotice.classList.remove("hidden");
        if (vehicleSelect.value !== VAN_LABEL) vehicleSelect.value = VAN_LABEL;
        selectFleetByLabel(VAN_LABEL);
        updateSelectedVehicleUI();
      }

      // luggage hint for 4 pax + many bags
      if (!Number.isNaN(paxNum) && paxNum >= 4 && manyBags) {
        luggageVanHint.classList.remove("hidden");
      } else {
        luggageVanHint.classList.add("hidden");
      }
    }

    function updateContextHints() {
      // urgent
      if (isWithinHours(whenEl.value, 2)) urgentHint.classList.remove("hidden");
      else urgentHint.classList.add("hidden");

      // airport/station hint
      const a = isAirportOrStationText(fromEl.value) || isAirportOrStationText(toEl.value);
      travelHint.classList.toggle("hidden", !a);

      // round trip hint
      const isAR = (serviceTypeEl.value || "").toLowerCase().includes("andata/ritorno") || (serviceTypeEl.value || "").toLowerCase().includes("round");
      arHint.classList.toggle("hidden", !isAR);
    }

    function updateNotesSuggestion() {
      const T = I18N[LANG];
      const parts = [];

      if (invoiceEl.checked) parts.push(LANG === "en" ? "Invoice required." : "Richiedo fattura (dati in chat).");
      if (isAirportOrStationText(fromEl.value) || isAirportOrStationText(toEl.value)) {
        parts.push(LANG === "en" ? "If available: flight/train number." : "Se disponibile: numero volo/treno.");
      }
      if (paxSelect.value === "8+") {
        parts.push(LANG === "en" ? "Group: 8+ passengers (please advise luggage)." : "Gruppo: 8+ passeggeri (indica anche i bagagli).");
      }
      notesHintEl.textContent = parts.length ? (LANG === "en" ? "Tip: " : "Suggerimento: ") + parts.join(" ") : "";
    }

    // ---------- WhatsApp messages ----------
    function buildGenericWhatsAppMessage() {
      return I18N[LANG].waTemplates.base;
    }

    function buildFormWhatsAppMessage() {
      const T = I18N[LANG];
      const lines = [];
      lines.push(T.waTemplates.formPrefix.trim());

      const paxVal = paxSelect.value || "";
      const bagsVal = (luggage === "none" ? (LANG==="en"?"None":"Nessuno") :
                      luggage === "some" ? (LANG==="en"?"1–2 suitcases":"1–2 valigie") :
                      (LANG==="en"?"Lots of luggage":"Molti bagagli"));

      lines.push((LANG==="en"?"Pickup: ":"Partenza: ") + (fromEl.value || ""));
      lines.push((LANG==="en"?"Drop-off: ":"Destinazione: ") + (toEl.value || ""));
      if (stopsEl.value.trim()) lines.push((LANG==="en"?"Stops: ":"Fermate: ") + stopsEl.value.trim());
      lines.push((LANG==="en"?"Date/Time: ":"Data/Ora: ") + (whenEl.value || ""));
      lines.push((LANG==="en"?"Passengers: ":"Passeggeri: ") + paxVal);
      lines.push((LANG==="en"?"Vehicle: ":"Veicolo: ") + (vehicleSelect.value || ""));
      lines.push((LANG==="en"?"Luggage: ":"Bagagli: ") + bagsVal);
      if (nameEl.value.trim()) lines.push((LANG==="en"?"Name: ":"Nome: ") + nameEl.value.trim());
      if (phoneEl.value.trim()) lines.push((LANG==="en"?"Phone: ":"Telefono: ") + phoneEl.value.trim());
      if (invoiceEl.checked) lines.push(LANG==="en" ? "Invoice: yes" : "Fattura: sì");

      const n = (notesEl.value || "").trim();
      if (n) lines.push((LANG==="en"?"Notes: ":"Note: ") + n);

      return lines.join("\n");
    }

    // ---------- Actions / events ----------
    function setLang(next) {
      LANG = next;
      localStorage.setItem("nexaride_lang", LANG);
      applyLang();
      updateNotesSuggestion();
      updateContextHints();
    }

    function openWAFrom(source, text) {
      track("click_whatsapp", { source, lang: LANG });
      openWhatsAppWithText(text);
    }

    // ---------- bind ----------
    langIT.addEventListener("click", () => setLang("it"));
    langEN.addEventListener("click", () => setLang("en"));

    document.getElementById("ctaWATop").addEventListener("click", () => openWAFrom("header", buildGenericWhatsAppMessage()));
    document.getElementById("ctaWAHero").addEventListener("click", () => openWAFrom("hero", buildGenericWhatsAppMessage()));
    document.getElementById("ctaWAOpenGeneric").addEventListener("click", () => openWAFrom("hero_card", buildGenericWhatsAppMessage()));
    document.getElementById("ctaWAOpenGeneric2").addEventListener("click", () => openWAFrom("quote_top", buildGenericWhatsAppMessage()));
    document.getElementById("ctaWAFooter").addEventListener("click", () => openWAFrom("footer", buildGenericWhatsAppMessage()));
    document.getElementById("stickyWA").addEventListener("click", () => openWAFrom("sticky", buildGenericWhatsAppMessage()));
    document.getElementById("urgentWA").addEventListener("click", () => openWAFrom("urgent", buildFormWhatsAppMessage()));

    document.getElementById("ctaScrollToForm").addEventListener("click", () => scrollToQuoteAndFocus());
    document.getElementById("ctaFooterToForm").addEventListener("click", () => scrollToQuoteAndFocus());
    document.getElementById("stickyQuote").addEventListener("click", () => scrollToQuoteAndFocus());
    document.getElementById("ctaFleetToForm").addEventListener("click", () => scrollToQuoteAndFocus());
    document.getElementById("ctaWhy").addEventListener("click", () => openWAFrom("why", buildGenericWhatsAppMessage()));

    // fleet select -> vehicle select
    fleetCards.forEach(card => {
      card.addEventListener("click", () => {
        const label = card.getAttribute("data-vehicle-label");
        if (!label) return;
        vehicleSelect.value = label;
        selectFleetByLabel(label);
        updateSelectedVehicleUI();
        enforceCapacityRule();
        updateNotesSuggestion();
        updateContextHints();
        scrollToQuoteAndFocus();
      });
    });

    // contact pref
    prefWA.addEventListener("click", () => setContactPref(I18N[LANG].quote.prefWA));
    prefCall.addEventListener("click", () => setContactPref(I18N[LANG].quote.prefCall));

    // luggage
    lugNone.addEventListener("click", () => setLuggage("none"));
    lugSome.addEventListener("click", () => setLuggage("some"));
    lugMany.addEventListener("click", () => setLuggage("many"));

    // reactive hints
    vehicleSelect.addEventListener("change", () => {
      selectFleetByLabel(vehicleSelect.value);
      updateSelectedVehicleUI();
      updateNotesSuggestion();
      enforceCapacityRule();
      updateContextHints();
    });
    paxSelect.addEventListener("change", () => { enforceCapacityRule(); updateNotesSuggestion(); updateContextHints(); });
    serviceTypeEl.addEventListener("change", () => { updateNotesSuggestion(); updateContextHints(); });
    fromEl.addEventListener("input", () => updateContextHints());
    toEl.addEventListener("input", () => updateContextHints());
    whenEl.addEventListener("change", () => updateContextHints());
    whenEl.addEventListener("focus", () => setMinDateTimeNow());
    invoiceEl.addEventListener("change", () => updateNotesSuggestion());
    notesEl.addEventListener("input", () => updateNotesSuggestion());

    // form validation
    function showFormAlert(missingLabels) {
      formAlertText.textContent = (LANG === "en" ? "Missing: " : "Manca: ") + missingLabels.join(" · ");
      formAlert.classList.remove("hidden");
    }
    function hideFormAlert() { formAlert.classList.add("hidden"); formAlertText.textContent = ""; }

    // submit
    document.getElementById("quoteForm").addEventListener("submit", (e) => {
      e.preventDefault();
      hideFormAlert();

      track("submit_form", { lang: LANG });

      const missing = [];
      if (!vehicleSelect.value) missing.push(LANG === "en" ? "Vehicle" : "Veicolo");
      if (!fromEl.value.trim()) missing.push(LANG === "en" ? "Pickup" : "Partenza");
      if (!toEl.value.trim()) missing.push(LANG === "en" ? "Drop-off" : "Destinazione");
      if (!whenEl.value) missing.push(LANG === "en" ? "Date/Time" : "Data/Ora");
      if (!paxSelect.value) missing.push(LANG === "en" ? "Passengers" : "Passeggeri");

      if (missing.length) {
        showFormAlert(missing);
        scrollToQuoteAndFocus();
        return;
      }

      openWAFrom("form_submit", buildFormWhatsAppMessage());
    });

    // reset
    document.getElementById("resetBtn").addEventListener("click", () => {
      document.getElementById("quoteForm").reset();

      clearFleetSelection();
      updateSelectedVehicleUI();
      hideFormAlert();

      setContactPref("WhatsApp");
      setLuggage("none");

      setMinDateTimeNow();
      whenEl.value = "";
      setDefaultDateTimePlus60();

      capacityNotice.classList.add("hidden");
      paxPlusNotice.classList.add("hidden");
      urgentHint.classList.add("hidden");
      travelHint.classList.add("hidden");
      arHint.classList.add("hidden");
      luggageVanHint.classList.add("hidden");

      updateNotesSuggestion();
      updateContextHints();
    });

    // init
    document.getElementById("y").textContent = new Date().getFullYear();
    setMinDateTimeNow();
    setDefaultDateTimePlus60();
    setContactPref("WhatsApp");
    setLuggage("none");
    applyLang();
    updateNotesSuggestion();
    updateContextHints();
  </script>
</body>
</html>
